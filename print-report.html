<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ì „ì²´ ë³´ê³ ì„œ ì¸ì‡„ - Prefab í’ˆì§ˆê´€ë¦¬ ì‹œìŠ¤í…œ</title>
    <link rel="stylesheet" href="assets/css/style.css">
    <style>
        /* ì¸ì‡„ ì „ìš© ìŠ¤íƒ€ì¼ - ê¸°ë³¸ (ì„¸ë¡œ) */
        @media print {
            @page {
                size: A4 portrait;
                margin: 15mm;
            }
            
            /* ë¸Œë¼ìš°ì € ê¸°ë³¸ í—¤ë”/í‘¸í„° ì œê±° */
            html {
                -webkit-print-color-adjust: exact;
                print-color-adjust: exact;
            }
            
            body {
                margin: 0;
                padding: 0;
            }
            
            .no-print {
                display: none !important;
            }
            
            .page-nav {
                display: none !important;
            }
            
            .nav-buttons {
                display: none !important;
            }
            
            .page-break {
                page-break-after: always;
                break-after: page;
            }
            
            .card {
                page-break-inside: avoid;
                break-inside: avoid;
                margin-bottom: 1rem;
            }
            
            /* ê·¸ë˜í”„ í¬ê¸° ì¡°ì • */
            .chart-container canvas {
                max-width: 100% !important;
                height: auto !important;
            }
            
            /* ì‚¬ì§„ í¬ê¸° ì¡°ì • - ì„¸ë¡œ (ê¸°ë³¸) */
            .photo-upload img {
                max-width: 100% !important;
                height: auto !important;
                object-fit: contain !important;
            }
            
            /* ìš´ì†¡ê²°ê³¼ ë¦¬í¬íŠ¸ ì‚¬ì§„ ê·¸ë¦¬ë“œ - ì„¸ë¡œ: 1í˜ì´ì§€ë‹¹ 2ì¥ (ì´ 2í˜ì´ì§€) */
            .transport-photo-grid {
                display: grid !important;
                grid-template-columns: 1fr !important;
                gap: 10mm !important;
            }
            
            .transport-photo-grid > div {
                page-break-inside: avoid !important;
                break-inside: avoid !important;
            }
            
            .transport-photo-grid .photo-upload {
                height: 100mm !important;
                display: flex !important;
                align-items: center !important;
                justify-content: center !important;
                border: 0.1mm solid #000000 !important;
                padding: 3mm !important;
                box-sizing: border-box !important;
            }
            
            .transport-photo-grid .photo-upload img {
                max-width: 100% !important;
                max-height: 100% !important;
                width: auto !important;
                height: auto !important;
                object-fit: contain !important;
            }
            
            .transport-photo-grid h4 {
                margin: 0 0 3mm 0 !important;
                font-size: 11pt !important;
                font-weight: 600 !important;
                color: #333 !important;
            }
            
            /* ë¶€ì¬ ì œì‘ ì˜¤ì°¨ ì‚¬ì§„ - ìš©ì§€ ê°€ë“ ì±„ìš°ê¸° */
            .error-photo-grid {
                display: grid !important;
                grid-template-columns: 1fr !important;
                gap: 20mm !important;
            }
            
            .error-photo-grid .photo-upload {
                height: 85mm !important;
                display: flex !important;
                align-items: center !important;
                justify-content: center !important;
                border: 0.1mm solid #000000 !important;
                padding: 2mm !important;
                box-sizing: border-box !important;
            }
            
            .error-photo-grid .photo-upload img {
                max-width: 100% !important;
                max-height: 100% !important;
                width: auto !important;
                height: auto !important;
                object-fit: contain !important;
            }
            
            /* í‘œ ìŠ¤íƒ€ì¼ ìµœì í™” */
            table {
                font-size: 10pt;
                width: 100%;
            }
            
            th, td {
                padding: 0.5rem;
            }
            
            /* í—¤ë” ìµœì í™” */
            .print-header {
                padding: 1.5rem 1rem !important;
            }
            
            .print-header h1 {
                font-size: 2rem !important;
            }
            
            .section-title {
                font-size: 1.5rem !important;
                margin-top: 1rem !important;
            }
        }
        
        /* ê°€ë¡œ ë°©í–¥ ì¸ì‡„ ìŠ¤íƒ€ì¼ */
        @media print {
            body.landscape-print {
                width: 297mm;
                height: 210mm;
            }
            
            body.landscape-print @page {
                size: A4 landscape;
                margin: 15mm;
            }
            
            body.landscape-print .container {
                max-width: 100% !important;
            }
            
            /* ê°€ë¡œ ëª¨ë“œì—ì„œ ì‚¬ì§„ ê·¸ë¦¬ë“œ 3ì—´ */
            body.landscape-print .transport-photo-grid {
                grid-template-columns: repeat(3, 1fr) !important;
            }
            
            /* ê°€ë¡œ ëª¨ë“œì—ì„œ ì‚¬ì§„ í¬ê¸° ì¡°ì • */
            body.landscape-print .photo-upload img {
                max-width: 250px !important;
                max-height: 250px !important;
            }
            
            /* ê°€ë¡œ ëª¨ë“œì—ì„œ í‘œ í°íŠ¸ í¬ê¸° ì¦ê°€ */
            body.landscape-print table {
                font-size: 11pt;
            }
            
            /* ê°€ë¡œ ëª¨ë“œì—ì„œ ì¹´ë“œ 2ì—´ ë°°ì¹˜ */
            body.landscape-print .two-column-landscape {
                display: grid;
                grid-template-columns: repeat(2, 1fr);
                gap: 1rem;
            }
            
            /* ê·¸ë˜í”„ í¬ê¸° ìµœì í™” */
            body.landscape-print .chart-container {
                height: 400px !important;
            }
        }
        
        /* í™”ë©´ í‘œì‹œìš© ìŠ¤íƒ€ì¼ */
        .report-section {
            margin-bottom: 2rem;
        }
        
        .section-title {
            font-size: 1.75rem;
            font-weight: bold;
            color: var(--primary-color);
            margin: 2rem 0 1rem 0;
            padding-bottom: 0.5rem;
            border-bottom: 2px solid var(--primary-color);
        }
        
        .print-header {
            text-align: center;
            padding: 2rem;
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
            color: white;
            margin-bottom: 2rem;
        }
        
        .print-header h1 {
            font-size: 2.5rem;
            margin-bottom: 0.5rem;
        }
        
        .print-header .subtitle {
            font-size: 1.2rem;
            opacity: 0.9;
        }
        
        .loading-message {
            text-align: center;
            padding: 3rem;
            font-size: 1.2rem;
            color: var(--primary-color);
        }
        
        /* Badge styles for evaluation results */
        .badge {
            display: inline-block;
            padding: 0.25rem 0.75rem;
            font-size: 0.875rem;
            font-weight: 600;
            line-height: 1.5;
            text-align: center;
            white-space: nowrap;
            border-radius: var(--radius-sm);
        }
        
        .badge-success {
            background-color: #d4edda;
            color: #155724;
            border: 1px solid #c3e6cb;
        }
        
        .badge-danger {
            background-color: #f8d7da;
            color: #721c24;
            border: 1px solid #f5c6cb;
        }
        
        .badge-warning {
            background-color: #fff3cd;
            color: #856404;
            border: 1px solid #ffeaa7;
        }
        
        /* Print styles for badges */
        @media print {
            .badge {
                -webkit-print-color-adjust: exact;
                print-color-adjust: exact;
            }
        }
        
        .print-button-container {
            position: fixed;
            top: 20px;
            right: 20px;
            z-index: 1000;
            background: white;
            padding: 1rem;
            border-radius: var(--radius-lg);
            box-shadow: 0 4px 12px rgba(0,0,0,0.15);
        }
        
        .print-options {
            margin-bottom: 1rem;
            padding-bottom: 1rem;
            border-bottom: 2px solid var(--border-color);
        }
        
        .print-options h3 {
            margin: 0 0 0.75rem 0;
            font-size: 1rem;
            color: var(--text-primary);
        }
        
        .orientation-buttons {
            display: flex;
            gap: 0.5rem;
        }
        
        .orientation-btn {
            flex: 1;
            padding: 0.75rem 1rem;
            border: 2px solid var(--border-color);
            background: white;
            border-radius: var(--radius-md);
            cursor: pointer;
            font-size: 0.9rem;
            transition: all 0.3s ease;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 0.25rem;
        }
        
        .orientation-btn:hover {
            border-color: var(--primary-color);
            background: #f0f9ff;
        }
        
        .orientation-btn.active {
            border-color: var(--primary-color);
            background: var(--primary-color);
            color: white;
            font-weight: 600;
        }
        
        .orientation-btn .icon {
            font-size: 1.5rem;
        }
        
        .print-button {
            background: var(--primary-color);
            color: white;
            border: none;
            padding: 1rem 2rem;
            font-size: 1.1rem;
            border-radius: var(--radius-md);
            cursor: pointer;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
            transition: all 0.3s ease;
            width: 100%;
            display: block;
            margin-bottom: 0.5rem;
        }
        
        .print-button:hover {
            background: var(--secondary-color);
            transform: translateY(-2px);
            box-shadow: 0 6px 8px rgba(0,0,0,0.15);
        }
        
        .back-button {
            background: #6b7280;
            color: white;
            border: none;
            padding: 0.75rem 1.5rem;
            font-size: 0.95rem;
            border-radius: var(--radius-md);
            cursor: pointer;
            width: 100%;
            display: block;
        }
        
        .back-button:hover {
            background: #4b5563;
        }
    </style>
    <script src="assets/js/script.js"></script>
</head>
<body>
    <!-- ì¸ì‡„ ë²„íŠ¼ -->
    <div class="print-button-container no-print">
        <div class="print-options">
            <h3>ğŸ“„ ìš©ì§€ ë°©í–¥ ì„ íƒ</h3>
            <div class="orientation-buttons">
                <button class="orientation-btn active" id="portraitBtn" onclick="setOrientation('portrait')">
                    <span class="icon">ğŸ“„</span>
                    <span>ì„¸ë¡œ (A4)</span>
                </button>
                <button class="orientation-btn" id="landscapeBtn" onclick="setOrientation('landscape')">
                    <span class="icon">ğŸ“ƒ</span>
                    <span>ê°€ë¡œ (A4)</span>
                </button>
            </div>
        </div>
        <button class="print-button" onclick="printReport()">ğŸ–¨ï¸ ì „ì²´ ë³´ê³ ì„œ ì¸ì‡„</button>
        <button class="back-button" onclick="window.location.href='index.html'">â† ëŒì•„ê°€ê¸°</button>
        
        <!-- ì¸ì‡„ ì•ˆë‚´ -->
        <div style="margin-top: 1rem; padding: 1rem; background: #fff3cd; border: 1px solid #ffc107; border-radius: 5px;">
            <strong>ğŸ’¡ ê¹”ë”í•œ ì¸ì‡„ë¥¼ ìœ„í•œ ì„¤ì •:</strong><br>
            ì¸ì‡„ ëŒ€í™”ìƒìì—ì„œ <strong>"í—¤ë” ë° í‘¸í„°"</strong> ì˜µì…˜ì„ <strong>ë„ê¸°</strong>ë¡œ ì„¤ì •í•˜ì„¸ìš”.<br>
            <small style="color: #666;">
                Chrome: ì¸ì‡„ â†’ ê¸°íƒ€ ì„¤ì • â†’ "í—¤ë” ë° í‘¸í„°" ì²´í¬ í•´ì œ<br>
                Edge: ì¸ì‡„ â†’ ê¸°íƒ€ ì„¤ì • â†’ "ë¨¸ë¦¬ê¸€ ë° ë°”ë‹¥ê¸€" ì²´í¬ í•´ì œ
            </small>
        </div>
    </div>

    <!-- ë¡œë”© ë©”ì‹œì§€ -->
    <div id="loadingMessage" class="loading-message">
        <h2>ğŸ“„ ì „ì²´ ë³´ê³ ì„œ ìƒì„± ì¤‘...</h2>
        <p>ëª¨ë“  ë°ì´í„°ë¥¼ ë¶ˆëŸ¬ì˜¤ê³  ìˆìŠµë‹ˆë‹¤. ì ì‹œë§Œ ê¸°ë‹¤ë ¤ì£¼ì„¸ìš”.</p>
        <div id="debugInfo" style="margin-top: 1rem; font-size: 0.9rem; color: #666;"></div>
    </div>

    <!-- ë³´ê³ ì„œ ì»¨í…Œì´ë„ˆ -->
    <div id="reportContainer" style="display: none;">
        <!-- ë³´ê³ ì„œ í—¤ë” -->
        <div class="print-header">
            <h1>Prefab í’ˆì§ˆê´€ë¦¬ ì‹œìŠ¤í…œ</h1>
            <div class="subtitle">ì „ì²´ í’ˆì§ˆê´€ë¦¬ ë³´ê³ ì„œ</div>
        </div>

        <div class="container">
            <!-- 1. ì¢…í•© ìš”ì•½ -->
            <div class="report-section page-break">
                <h2 class="section-title">1. ì¢…í•© ìš”ì•½</h2>
                <div id="section1Content"></div>
            </div>

            <!-- 2. ìš´ì†¡ê²°ê³¼ ë¦¬í¬íŠ¸ -->
            <div class="report-section page-break">
                <h2 class="section-title">2. ìš´ì†¡ê²°ê³¼ ë¦¬í¬íŠ¸</h2>
                <div id="section2Content"></div>
            </div>

            <!-- 3. ê°€ì†ë„ ë°ì´í„° -->
            <div class="report-section page-break">
                <h2 class="section-title">3. ê°€ì†ë„ ë°ì´í„°</h2>
                <div id="section3Content"></div>
            </div>

            <!-- 4. ê¸°ìš¸ê¸° ë°ì´í„° -->
            <div class="report-section page-break">
                <h2 class="section-title">4. ê¸°ìš¸ê¸° ë°ì´í„°</h2>
                <div id="section4Content"></div>
            </div>

            <!-- 5. ë³€í˜•ë¥  ë°ì´í„° -->
            <div class="report-section page-break">
                <h2 class="section-title">5. ë³€í˜•ë¥  ë°ì´í„°</h2>
                <div id="section5Content"></div>
            </div>

            <!-- 6. ë¶€ì¬ ì œì‘ ì˜¤ì°¨ -->
            <div class="report-section page-break">
                <h2 class="section-title">6. ë¶€ì¬ ì œì‘ ì˜¤ì°¨</h2>
                <div id="section6Content"></div>
            </div>

            <!-- 7. ì¢…í•© ëŒ€ì‹œë³´ë“œ -->
            <div class="report-section">
                <h2 class="section-title">7. ì¢…í•© ëŒ€ì‹œë³´ë“œ</h2>
                <div id="section7Content"></div>
            </div>
        </div>
    </div>

    <script>
        // ì¸ì‡„ ë°©í–¥ ì„¤ì • ë³€ìˆ˜
        let currentOrientation = 'portrait'; // ê¸°ë³¸ê°’: ì„¸ë¡œ
        
        // ë°©í–¥ ì„¤ì • í•¨ìˆ˜
        function setOrientation(orientation) {
            console.log('ìš©ì§€ ë°©í–¥ ë³€ê²½:', orientation);
            currentOrientation = orientation;
            
            // ë²„íŠ¼ í™œì„±í™” ìƒíƒœ ë³€ê²½
            document.getElementById('portraitBtn').classList.toggle('active', orientation === 'portrait');
            document.getElementById('landscapeBtn').classList.toggle('active', orientation === 'landscape');
            
            // body í´ë˜ìŠ¤ ë³€ê²½
            if (orientation === 'landscape') {
                document.body.classList.add('landscape-print');
            } else {
                document.body.classList.remove('landscape-print');
            }
        }
        
        // ì¸ì‡„ í•¨ìˆ˜
        function printReport() {
            console.log('ë³´ê³ ì„œ ì¸ì‡„ ì‹œì‘, ë°©í–¥:', currentOrientation);
            
            // ì¸ì‡„ ì „ í™•ì¸ ë©”ì‹œì§€
            const orientationText = currentOrientation === 'portrait' ? 'ì„¸ë¡œ (Portrait)' : 'ê°€ë¡œ (Landscape)';
            const printConfirm = confirm(
                `ğŸ“„ ì „ì²´ ë³´ê³ ì„œë¥¼ ${orientationText} ë°©í–¥ìœ¼ë¡œ ì¸ì‡„í•˜ì‹œê² ìŠµë‹ˆê¹Œ?\n\n` +
                `ì¸ì‡„ ì„¤ì •:\n` +
                `â€¢ ìš©ì§€ ë°©í–¥: ${orientationText}\n` +
                `â€¢ ìš©ì§€ í¬ê¸°: A4\n` +
                `â€¢ ë°°ê²½ ê·¸ë˜í”½: í™œì„±í™” ê¶Œì¥\n` +
                `â€¢ ì—¬ë°±: ë³´í†µ\n\n` +
                `ì¸ì‡„ ëŒ€í™”ìƒìì—ì„œ ë°©í–¥ì„ "${orientationText}"ë¡œ ì„¤ì •í•´ì£¼ì„¸ìš”.`
            );
            
            if (printConfirm) {
                // ë°©í–¥ì— ë”°ë¼ body í´ë˜ìŠ¤ ì„¤ì •
                if (currentOrientation === 'landscape') {
                    document.body.classList.add('landscape-print');
                } else {
                    document.body.classList.remove('landscape-print');
                }
                
                // ì¸ì‡„ ì‹¤í–‰
                window.print();
            }
        }
        
        // ì „ì²´ ë³´ê³ ì„œ ìƒì„±
        document.addEventListener('DOMContentLoaded', async function() {
            console.log('=== ì „ì²´ ë³´ê³ ì„œ ìƒì„± ì‹œì‘ ===');
            
            const debugInfo = document.getElementById('debugInfo');
            
            try {
                // í•„ìˆ˜ í•¨ìˆ˜ í™•ì¸
                debugInfo.textContent = 'í•„ìˆ˜ í•¨ìˆ˜ í™•ì¸ ì¤‘...';
                console.log('STORAGE_KEYS í™•ì¸:', typeof STORAGE_KEYS);
                console.log('getFromStorage í™•ì¸:', typeof getFromStorage);
                console.log('drawBarChart í™•ì¸:', typeof drawBarChart);
                
                if (typeof STORAGE_KEYS === 'undefined') {
                    throw new Error('STORAGE_KEYSê°€ ì •ì˜ë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤. script.js ë¡œë“œë¥¼ í™•ì¸í•˜ì„¸ìš”.');
                }
                
                if (typeof getFromStorage === 'undefined') {
                    throw new Error('getFromStorage í•¨ìˆ˜ê°€ ì •ì˜ë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤.');
                }
                
                // ëª¨ë“  ì„¹ì…˜ ë¡œë“œ
                debugInfo.textContent = 'ë°ì´í„° ë¡œë“œ ì¤‘...';
                await loadAllSections();
                
                // ë¡œë”© ë©”ì‹œì§€ ìˆ¨ê¸°ê³  ë³´ê³ ì„œ í‘œì‹œ
                document.getElementById('loadingMessage').style.display = 'none';
                document.getElementById('reportContainer').style.display = 'block';
                
                console.log('âœ… ì „ì²´ ë³´ê³ ì„œ ìƒì„± ì™„ë£Œ');
            } catch (error) {
                console.error('âŒ ë³´ê³ ì„œ ìƒì„± ì˜¤ë¥˜:', error);
                console.error('ì˜¤ë¥˜ ìŠ¤íƒ:', error.stack);
                document.getElementById('loadingMessage').innerHTML = `
                    <h2>âŒ ë³´ê³ ì„œ ìƒì„± ì‹¤íŒ¨</h2>
                    <p style="color: red; font-weight: bold;">ì˜¤ë¥˜: ${error.message}</p>
                    <pre style="text-align: left; background: #f5f5f5; padding: 1rem; border-radius: 4px; overflow: auto; max-width: 600px; margin: 1rem auto;">${error.stack || 'ìŠ¤íƒ ì •ë³´ ì—†ìŒ'}</pre>
                    <button class="btn btn-primary" onclick="location.reload()">ë‹¤ì‹œ ì‹œë„</button>
                    <button class="btn btn-secondary" onclick="window.location.href='index.html'" style="margin-left: 1rem;">ë©”ì¸ìœ¼ë¡œ</button>
                `;
            }
        });

        async function loadAllSections() {
            const debugInfo = document.getElementById('debugInfo');
            
            try {
                debugInfo.textContent = '1. ì¢…í•© ìš”ì•½ ë¡œë“œ ì¤‘...';
                console.log('ì„¹ì…˜ 1 ë¡œë“œ ì‹œì‘');
                loadSection1();
                console.log('ì„¹ì…˜ 1 ë¡œë“œ ì™„ë£Œ');
            } catch (e) {
                console.error('ì„¹ì…˜ 1 ì˜¤ë¥˜:', e);
            }
            
            try {
                debugInfo.textContent = '2. ìš´ì†¡ê²°ê³¼ ë¦¬í¬íŠ¸ ë¡œë“œ ì¤‘...';
                console.log('ì„¹ì…˜ 2 ë¡œë“œ ì‹œì‘');
                loadSection2();
                console.log('ì„¹ì…˜ 2 ë¡œë“œ ì™„ë£Œ');
            } catch (e) {
                console.error('ì„¹ì…˜ 2 ì˜¤ë¥˜:', e);
            }
            
            try {
                debugInfo.textContent = '3. ê°€ì†ë„ ë°ì´í„° ë¡œë“œ ì¤‘...';
                console.log('ì„¹ì…˜ 3 ë¡œë“œ ì‹œì‘');
                loadSection3();
                console.log('ì„¹ì…˜ 3 ë¡œë“œ ì™„ë£Œ');
            } catch (e) {
                console.error('ì„¹ì…˜ 3 ì˜¤ë¥˜:', e);
            }
            
            try {
                debugInfo.textContent = '4. ê¸°ìš¸ê¸° ë°ì´í„° ë¡œë“œ ì¤‘...';
                console.log('ì„¹ì…˜ 4 ë¡œë“œ ì‹œì‘');
                loadSection4();
                console.log('ì„¹ì…˜ 4 ë¡œë“œ ì™„ë£Œ');
            } catch (e) {
                console.error('ì„¹ì…˜ 4 ì˜¤ë¥˜:', e);
            }
            
            try {
                debugInfo.textContent = '5. ë³€í˜•ë¥  ë°ì´í„° ë¡œë“œ ì¤‘...';
                console.log('ì„¹ì…˜ 5 ë¡œë“œ ì‹œì‘');
                loadSection5();
                console.log('ì„¹ì…˜ 5 ë¡œë“œ ì™„ë£Œ');
            } catch (e) {
                console.error('ì„¹ì…˜ 5 ì˜¤ë¥˜:', e);
            }
            
            try {
                debugInfo.textContent = '6. ë¶€ì¬ ì œì‘ ì˜¤ì°¨ ë¡œë“œ ì¤‘...';
                console.log('ì„¹ì…˜ 6 ë¡œë“œ ì‹œì‘');
                loadSection6();
                console.log('ì„¹ì…˜ 6 ë¡œë“œ ì™„ë£Œ');
            } catch (e) {
                console.error('ì„¹ì…˜ 6 ì˜¤ë¥˜:', e);
            }
            
            try {
                debugInfo.textContent = '7. ì¢…í•© ëŒ€ì‹œë³´ë“œ ë¡œë“œ ì¤‘...';
                console.log('ì„¹ì…˜ 7 ë¡œë“œ ì‹œì‘');
                loadSection7();
                console.log('ì„¹ì…˜ 7 ë¡œë“œ ì™„ë£Œ');
            } catch (e) {
                console.error('ì„¹ì…˜ 7 ì˜¤ë¥˜:', e);
            }
            
            debugInfo.textContent = 'ëª¨ë“  ì„¹ì…˜ ë¡œë“œ ì™„ë£Œ!';
        }

        // 1. ì¢…í•© ìš”ì•½ ë¡œë“œ
        function loadSection1() {
            console.log('ì„¹ì…˜ 1 ë¡œë“œ: ì¢…í•© ìš”ì•½');
            const container = document.getElementById('section1Content');
            
            // í”„ë¡œì íŠ¸ ì •ë³´
            const projectData = getFromStorage(STORAGE_KEYS.PROJECT_INFO) || {};
            
            container.innerHTML = `
                <div class="card">
                    <div class="card-header">
                        <h3 class="card-title">í”„ë¡œì íŠ¸ ì •ë³´</h3>
                    </div>
                    <div class="card-body">
                        <div class="info-grid">
                            <div class="info-item">
                                <label class="info-label">ê³µì‚¬ëª…</label>
                                <div class="info-value">${projectData.projectName || '-'}</div>
                            </div>
                            <div class="info-item">
                                <label class="info-label">ì ê²€ì¼</label>
                                <div class="info-value">${projectData.inspectionDate || '-'}</div>
                            </div>
                            <div class="info-item">
                                <label class="info-label">Prefab ì¢…ë¥˜</label>
                                <div class="info-value">${projectData.prefabType || '-'}</div>
                            </div>
                            <div class="info-item">
                                <label class="info-label">ì„¤ì¹˜ ìœ„ì¹˜</label>
                                <div class="info-value">${projectData.location || '-'}</div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="card" style="margin-top: 1rem;">
                    <div class="card-header">
                        <h3 class="card-title">í’ˆì§ˆ ì ê²€ ê°œìš”</h3>
                    </div>
                    <div class="card-body">
                        <div class="stats-grid">
                            <div class="stat-card">
                                <div class="stat-label">ì„œë¥˜ ê²€ì¦</div>
                                <div class="stat-value">ì™„ë£Œ</div>
                            </div>
                            <div class="stat-card">
                                <div class="stat-label">ê°€ì†ë„ ê³„ì¸¡</div>
                                <div class="stat-value">ì™„ë£Œ</div>
                            </div>
                            <div class="stat-card">
                                <div class="stat-label">ê¸°ìš¸ê¸° ê³„ì¸¡</div>
                                <div class="stat-value">ì™„ë£Œ</div>
                            </div>
                            <div class="stat-card">
                                <div class="stat-label">ë³€í˜•ë¥  ê³„ì¸¡</div>
                                <div class="stat-value">ì™„ë£Œ</div>
                            </div>
                            <div class="stat-card">
                                <div class="stat-label">ì œì‘ ì˜¤ì°¨</div>
                                <div class="stat-value">ì™„ë£Œ</div>
                            </div>
                        </div>
                    </div>
                </div>
            `;
        }

        // 2. ìš´ì†¡ê²°ê³¼ ë¦¬í¬íŠ¸ ë¡œë“œ
        function loadSection2() {
            console.log('ì„¹ì…˜ 2 ë¡œë“œ: ìš´ì†¡ê²°ê³¼ ë¦¬í¬íŠ¸');
            const container = document.getElementById('section2Content');
            
            const surveyData = getFromStorage(STORAGE_KEYS.SURVEY_DATA) || {};
            
            // ì‚¬ì§„ 1-2 (ì²« ë²ˆì§¸ í˜ì´ì§€)
            let photosHTML1 = '';
            for (let i = 1; i <= 2; i++) {
                const photoKey = `photo${i}Preview`;
                const photoData = getFromStorage(STORAGE_KEYS.PHOTOS)?.[photoKey];
                const label = `í˜„ì¥ì‚¬ì§„ ${i}`;
                
                if (photoData) {
                    photosHTML1 += `
                        <div>
                            <h4 style="margin: 0 0 0.5rem 0; font-size: 0.9rem; font-weight: 600; color: #333;">ğŸ“· ${label}</h4>
                            <div class="photo-upload has-image">
                                <img src="${photoData}">
                            </div>
                        </div>
                    `;
                } else {
                    photosHTML1 += `
                        <div>
                            <h4 style="margin: 0 0 0.5rem 0; font-size: 0.9rem; font-weight: 600; color: #333;">ğŸ“· ${label}</h4>
                            <div class="photo-upload">
                                <span class="placeholder">(ì‚¬ì§„ ì—†ìŒ)</span>
                            </div>
                        </div>
                    `;
                }
            }
            
            // ì‚¬ì§„ 3-4 (ë‘ ë²ˆì§¸ í˜ì´ì§€)
            let photosHTML2 = '';
            for (let i = 3; i <= 4; i++) {
                const photoKey = `photo${i}Preview`;
                const photoData = getFromStorage(STORAGE_KEYS.PHOTOS)?.[photoKey];
                const label = `í˜„ì¥ì‚¬ì§„ ${i}`;
                
                if (photoData) {
                    photosHTML2 += `
                        <div>
                            <h4 style="margin: 0 0 0.5rem 0; font-size: 0.9rem; font-weight: 600; color: #333;">ğŸ“· ${label}</h4>
                            <div class="photo-upload has-image">
                                <img src="${photoData}">
                            </div>
                        </div>
                    `;
                } else {
                    photosHTML2 += `
                        <div>
                            <h4 style="margin: 0 0 0.5rem 0; font-size: 0.9rem; font-weight: 600; color: #333;">ğŸ“· ${label}</h4>
                            <div class="photo-upload">
                                <span class="placeholder">(ì‚¬ì§„ ì—†ìŒ)</span>
                            </div>
                        </div>
                    `;
                }
            }
            
            // í‰ê°€ ë¡œì§ (ëŒ€ì‹œë³´ë“œì™€ ë™ì¼)
            const q1Pass = surveyData.q1 === 'ìˆ˜ë ¹';
            const q2Pass = surveyData.q2 === 'ì—†ìŒ';
            const q3Pass = surveyData.q3 === 'ì–‘í˜¸';
            const q4Pass = surveyData.q4 === 'ì—†ìŒ';
            const q5Pass = surveyData.q5 === 'ì ì¹˜ë¨';
            
            container.innerHTML = `
                <div class="card">
                    <div class="card-header">
                        <h3 class="card-title">ìš´ì†¡ê²°ê³¼ ì ê²€ í•­ëª©</h3>
                    </div>
                    <div class="card-body">
                        <table class="result-table">
                            <thead>
                                <tr>
                                    <th>í‰ê°€ í•­ëª©</th>
                                    <th>ì¸¡ì • ê²°ê³¼</th>
                                    <th>í—ˆìš© ê¸°ì¤€</th>
                                    <th>íŒì •</th>
                                    <th>ë¹„ê³ </th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>í’ˆì§ˆë³´ì¦ì„œ ìˆ˜ë ¹</td>
                                    <td>${surveyData.q1 || '-'}</td>
                                    <td>ìˆ˜ë ¹ í•„ìˆ˜</td>
                                    <td>${q1Pass ? 'âœ… ì •ìƒ' : 'âŒ ë¶€ì í•©'}</td>
                                    <td>${q1Pass ? '-' : 'í’ˆì§ˆë³´ì¦ì„œ ë¯¸ìˆ˜ë ¹'}</td>
                                </tr>
                                <tr>
                                    <td>ìŠ¬ë˜ë¸Œ ì†ìƒ/ê· ì—´</td>
                                    <td>${surveyData.q2 || '-'}</td>
                                    <td>ì—†ìŒ</td>
                                    <td>${q2Pass ? 'âœ… ì •ìƒ' : 'âŒ ë¶€ì í•©'}</td>
                                    <td>${q2Pass ? '-' : 'ì†ìƒ ë˜ëŠ” ê· ì—´ í™•ì¸ë¨'}</td>
                                </tr>
                                <tr>
                                    <td>ìŠ¤í€ì§€ ì¬ë£Œ ë¶€ì°©ìƒíƒœ</td>
                                    <td>${surveyData.q3 || '-'}</td>
                                    <td>ì–‘í˜¸</td>
                                    <td>${q3Pass ? 'âœ… ì •ìƒ' : 'âŒ ë¶€ì í•©'}</td>
                                    <td>${q3Pass ? '-' : 'ë¶€ì°©ìƒíƒœ ë¶ˆëŸ‰'}</td>
                                </tr>
                                <tr>
                                    <td>ì™€ì´ì–´/ìŠ¬ë§ë²¨íŠ¸ ê²°í•¨</td>
                                    <td>${surveyData.q4 || '-'}</td>
                                    <td>ì—†ìŒ</td>
                                    <td>${q4Pass ? 'âœ… ì •ìƒ' : 'âŒ ë¶€ì í•©'}</td>
                                    <td>${q4Pass ? '-' : 'ê²°í•¨ ë˜ëŠ” íŒŒì† í™•ì¸ë¨'}</td>
                                </tr>
                                <tr>
                                    <td>ìŠ¬ë˜ë¸Œ ì ì¹˜</td>
                                    <td>${surveyData.q5 || '-'}</td>
                                    <td>ì ì¹˜ë¨</td>
                                    <td>${q5Pass ? 'âœ… ì •ìƒ' : 'âŒ ë¶€ì í•©'}</td>
                                    <td>${q5Pass ? '-' : 'ìƒì°¨ ìˆœì„œ ë¯¸ê³ ë ¤'}</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>

                <div class="card" style="margin-top: 1rem;">
                    <div class="card-header">
                        <h3 class="card-title">í˜„ì¥ ì‚¬ì§„ (1/2)</h3>
                    </div>
                    <div class="card-body">
                        <div class="transport-photo-grid">
                            ${photosHTML1}
                        </div>
                    </div>
                </div>
                
                <div class="card page-break" style="margin-top: 1rem;">
                    <div class="card-header">
                        <h3 class="card-title">í˜„ì¥ ì‚¬ì§„ (2/2)</h3>
                    </div>
                    <div class="card-body">
                        <div class="transport-photo-grid">
                            ${photosHTML2}
                        </div>
                    </div>
                </div>
            `;
        }

        // 3. ê°€ì†ë„ ë°ì´í„° ë¡œë“œ
        function loadSection3() {
            console.log('ì„¹ì…˜ 3 ë¡œë“œ: ê°€ì†ë„ ë°ì´í„°');
            const container = document.getElementById('section3Content');
            
            const accelData = getFromStorage(STORAGE_KEYS.ACCELERATION_DATA) || {};
            
            // ì¸¡ì • ë‹¨ê³„ í‘œì‹œ
            let phaseText = '-';
            if (accelData.info && accelData.info.accelPhase) {
                if (Array.isArray(accelData.info.accelPhase)) {
                    phaseText = accelData.info.accelPhase.join(', ');
                } else {
                    phaseText = accelData.info.accelPhase;
                }
            }
            
            container.innerHTML = `
                <div class="alert alert-info" style="margin-bottom: 1rem; padding: 1rem; background-color: #e0f2fe; border-left: 4px solid #0284c7; border-radius: 0.375rem;">
                    <strong style="color: #0369a1;">ğŸ“Š ê°€ì†ë„ ê³„ì¸¡ ì•ˆë‚´</strong>
                    <p style="margin-top: 0.5rem; color: #0c4a6e;">
                        Prefab ë¶€ì¬ì˜ ìš´ë°˜ ë° ì„¤ì¹˜ ê³¼ì •ì—ì„œ ë°œìƒí•˜ëŠ” ê°€ì†ë„ë¥¼ ì¸¡ì •í•©ë‹ˆë‹¤. (1g = 9.8 m/sÂ²)
                    </p>
                    <div style="margin-top: 0.75rem; padding: 0.5rem; background-color: white; border-radius: 0.25rem;">
                        <strong>í‰ê°€ ê¸°ì¤€:</strong><br>
                        <span style="color: #10b981;">âœ“ ì •ìƒ: 0.20G ë¯¸ë§Œ</span> | 
                        <span style="color: #f59e0b;">âš  ì£¼ì˜: 0.20~0.30G</span> | 
                        <span style="color: #f97316;">âš ï¸ ê²½ê³ : 0.30~0.40G</span> | 
                        <span style="color: #ef4444;">âŒ ìœ„í—˜: 0.40G ì´ˆê³¼</span>
                    </div>
                </div>

                <div class="card">
                    <div class="card-header">
                        <h3 class="card-title">ê³„ì¸¡ ì •ë³´</h3>
                    </div>
                    <div class="card-body">
                        <div class="info-grid">
                            <div class="info-item">
                                <label class="info-label">ì¸¡ì • ë‹¨ê³„</label>
                                <div class="info-value">${phaseText}</div>
                            </div>
                            <div class="info-item">
                                <label class="info-label">ì¸¡ì • ì¥ë¹„</label>
                                <div class="info-value">${accelData.info?.accelDevice || '-'}</div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="card" style="margin-top: 1rem;">
                    <div class="card-header">
                        <h3 class="card-title">ê°€ì†ë„ ì¸¡ì • ë°ì´í„°</h3>
                    </div>
                    <div class="card-body">
                        <table>
                            <thead>
                                <tr>
                                    <th>ì¸¡ì • ì§€ì </th>
                                    <th>Xì¶• (g)</th>
                                    <th>Yì¶• (g)</th>
                                    <th>Zì¶• (g)</th>
                                    <th>í•©ì„± (g)</th>
                                    <th>ìƒíƒœ</th>
                                </tr>
                            </thead>
                            <tbody>
                                ${generateAccelTableRows(accelData.measurements)}
                            </tbody>
                        </table>
                    </div>
                </div>

                <div class="card" style="margin-top: 1rem;">
                    <div class="card-header">
                        <h3 class="card-title">ê°€ì†ë„ ë¶„í¬ ê·¸ë˜í”„</h3>
                    </div>
                    <div class="card-body">
                        <div class="chart-container">
                            <canvas id="accelChart"></canvas>
                        </div>
                    </div>
                </div>
            `;
            
            // ì „ì²´ ê°€ì†ë„ ê·¸ë˜í”„ ì´ë¯¸ì§€ ì¶”ê°€
            const graphImage = getFromStorage(STORAGE_KEYS.ACCEL_GRAPH_IMAGE);
            if (graphImage) {
                container.innerHTML += `
                    <div class="card" style="margin-top: 1rem;">
                        <div class="card-header">
                            <h3 class="card-title">ì „ì²´ ê°€ì†ë„ ê·¸ë˜í”„</h3>
                        </div>
                        <div class="card-body">
                            <div style="text-align: center;">
                                <img src="${graphImage}" alt="ì „ì²´ ê°€ì†ë„ ê·¸ë˜í”„" style="max-width: 100%; height: auto; border: 1px solid #e5e7eb; border-radius: 0.375rem;">
                            </div>
                        </div>
                    </div>
                `;
            }
            
            // ê·¸ë˜í”„ ê·¸ë¦¬ê¸°
            setTimeout(() => {
                if (accelData.measurements && accelData.measurements.length > 0) {
                    drawAccelChart(accelData.measurements);
                }
            }, 100);
        }

        function generateAccelTableRows(measurements) {
            if (!measurements || measurements.length === 0) {
                return '<tr><td colspan="6" style="text-align: center;">ë°ì´í„° ì—†ìŒ</td></tr>';
            }
            
            const labels = ['ì¸¡ì • 1', 'ì¸¡ì • 2'];
            let html = '';
            
            measurements.forEach((m, i) => {
                const status = m.result > 0.40 ? 'ìœ„í—˜' : m.result >= 0.30 ? 'ê²½ê³ ' : m.result >= 0.20 ? 'ì£¼ì˜' : 'ì •ìƒ';
                const statusClass = m.result > 0.40 ? 'danger' : m.result >= 0.30 ? 'warning' : m.result >= 0.20 ? 'warning' : 'success';
                
                html += `
                    <tr>
                        <td>${labels[i] || `ì§€ì  ${i+1}`}</td>
                        <td>${m.x.toFixed(3)}</td>
                        <td>${m.y.toFixed(3)}</td>
                        <td>${m.z.toFixed(3)}</td>
                        <td>${m.result.toFixed(3)}</td>
                        <td><span class="badge badge-${statusClass}">${status}</span></td>
                    </tr>
                `;
            });
            
            return html;
        }

        function drawAccelChart(measurements) {
            const labels = ['ì¸¡ì • 1', 'ì¸¡ì • 2'];
            const values = measurements.map(m => m.result);
            const colors = values.map(v => {
                if (v > 0.5) return '#ef4444';
                if (v > 0.3) return '#f59e0b';
                return '#10b981';
            });
            
            const chartData = {
                labels: labels.slice(0, measurements.length),
                values: values,
                colors: colors,
                thresholds: {
                    upper: 0.5,
                    warning: 0.3
                },
                title: 'ì§€ì ë³„ ê°€ì†ë„ ì¸¡ì • ê²°ê³¼',
                yLabel: 'ê°€ì†ë„ (g)'
            };
            
            drawBarChart('accelChart', chartData);
        }

        // 4. ê¸°ìš¸ê¸° ë°ì´í„° ë¡œë“œ
        function loadSection4() {
            console.log('ì„¹ì…˜ 4 ë¡œë“œ: ê¸°ìš¸ê¸° ë°ì´í„°');
            const container = document.getElementById('section4Content');
            
            const tiltData = getFromStorage(STORAGE_KEYS.TILT_DATA) || {};
            
            // ì¸¡ì • ë‹¨ê³„ í‘œì‹œ
            let phaseText = '-';
            if (tiltData.info && tiltData.info.tiltPhase) {
                if (Array.isArray(tiltData.info.tiltPhase)) {
                    phaseText = tiltData.info.tiltPhase.join(', ');
                } else {
                    phaseText = tiltData.info.tiltPhase;
                }
            }
            
            container.innerHTML = `
                <div class="alert alert-info" style="margin-bottom: 1rem; padding: 1rem; background-color: #e0f2fe; border-left: 4px solid #0284c7; border-radius: 0.375rem;">
                    <strong style="color: #0369a1;">ğŸ“ ê¸°ìš¸ê¸° ê³„ì¸¡ ì•ˆë‚´</strong>
                    <p style="margin-top: 0.5rem; color: #0c4a6e;">
                        Prefab ë¶€ì¬ì˜ ì„¤ì¹˜ ì‹œ ìˆ˜í‰/ìˆ˜ì§ ê¸°ìš¸ê¸°ë¥¼ ì¸¡ì •í•©ë‹ˆë‹¤.
                    </p>
                    <div style="margin-top: 0.75rem; padding: 0.5rem; background-color: white; border-radius: 0.25rem;">
                        <strong>í‰ê°€ ê¸°ì¤€:</strong><br>
                        <span style="color: #10b981;">âœ“ ì •ìƒ: 3Â° ë¯¸ë§Œ</span> | 
                        <span style="color: #f59e0b;">âš  ì£¼ì˜: 3~5Â°</span> | 
                        <span style="color: #f97316;">âš ï¸ ê²½ê³ : 5~10Â°</span> | 
                        <span style="color: #ef4444;">âŒ ìœ„í—˜: 10Â° ì´ˆê³¼</span>
                    </div>
                </div>

                <div class="card">
                    <div class="card-header">
                        <h3 class="card-title">ê³„ì¸¡ ì •ë³´</h3>
                    </div>
                    <div class="card-body">
                        <div class="info-grid">
                            <div class="info-item">
                                <label class="info-label">ì¸¡ì • ë‹¨ê³„</label>
                                <div class="info-value">${phaseText}</div>
                            </div>
                            <div class="info-item">
                                <label class="info-label">ì¸¡ì • ì¥ë¹„</label>
                                <div class="info-value">${tiltData.info?.tiltDevice || '-'}</div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="card" style="margin-top: 1rem;">
                    <div class="card-header">
                        <h3 class="card-title">ê¸°ìš¸ê¸° ì¸¡ì • ë°ì´í„°</h3>
                    </div>
                    <div class="card-body">
                        <table>
                            <thead>
                                <tr>
                                    <th>ì¸¡ì • ì§€ì </th>
                                    <th>Xì¶• ê¸°ìš¸ê¸° (Â°)</th>
                                    <th>Yì¶• ê¸°ìš¸ê¸° (Â°)</th>
                                    <th>í•©ì„± ê¸°ìš¸ê¸° (Â°)</th>
                                    <th>ìƒíƒœ</th>
                                </tr>
                            </thead>
                            <tbody>
                                ${generateTiltTableRows(tiltData.measurements)}
                            </tbody>
                        </table>
                    </div>
                </div>

                <div class="card" style="margin-top: 1rem;">
                    <div class="card-header">
                        <h3 class="card-title">ê¸°ìš¸ê¸° ë¶„í¬ ê·¸ë˜í”„</h3>
                    </div>
                    <div class="card-body">
                        <div class="chart-container">
                            <canvas id="tiltChart"></canvas>
                        </div>
                    </div>
                </div>

                <div class="card" style="margin-top: 1rem;">
                    <div class="card-header">
                        <h3 class="card-title">ê¸°ìš¸ê¸° ì¡°ì • ì´ë ¥</h3>
                    </div>
                    <div class="card-body">
                        <pre style="white-space: pre-wrap; font-family: inherit;">${tiltData.adjustmentHistory || 'ì¡°ì • ì´ë ¥ ì—†ìŒ'}</pre>
                    </div>
                </div>
            `;
            
            // ì „ì²´ ê¸°ìš¸ê¸° ê·¸ë˜í”„ ì´ë¯¸ì§€ í‘œì‹œ
            const tiltGraphImage = getFromStorage(STORAGE_KEYS.TILT_GRAPH_IMAGE);
            if (tiltGraphImage) {
                container.innerHTML += `
                    <div class="card" style="margin-top: 1rem;">
                        <div class="card-header">
                            <h3 class="card-title">ì „ì²´ ê¸°ìš¸ê¸° ê·¸ë˜í”„</h3>
                        </div>
                        <div class="card-body">
                            <div style="text-align: center;">
                                <img src="${tiltGraphImage}" alt="ì „ì²´ ê¸°ìš¸ê¸° ê·¸ë˜í”„" 
                                     style="max-width: 100%; height: auto; border: 1px solid #e5e7eb; border-radius: 0.375rem;">
                            </div>
                        </div>
                    </div>
                `;
            }
            
            // ê·¸ë˜í”„ ê·¸ë¦¬ê¸°
            setTimeout(() => {
                if (tiltData.measurements && tiltData.measurements.length > 0) {
                    drawTiltChart(tiltData.measurements);
                }
            }, 100);
        }

        function generateTiltTableRows(measurements) {
            if (!measurements || measurements.length === 0) {
                return '<tr><td colspan="5" style="text-align: center;">ë°ì´í„° ì—†ìŒ</td></tr>';
            }
            
            const labels = ['ìƒë‹¨ ì¢Œì¸¡', 'ìƒë‹¨ ìš°ì¸¡', 'ì¤‘ì•™'];
            let html = '';
            
            measurements.forEach((m, i) => {
                const result = m.result || 0;
                let status = 'ì •ìƒ';
                let statusClass = 'success';
                
                if (result > 10.0) {
                    status = 'ìœ„í—˜';
                    statusClass = 'danger';
                } else if (result >= 5.0) {
                    status = 'ê²½ê³ ';
                    statusClass = 'warning';
                } else if (result >= 3.0) {
                    status = 'ì£¼ì˜';
                    statusClass = 'warning';
                }
                
                html += `
                    <tr>
                        <td>${labels[i] || `ì§€ì  ${i+1}`}</td>
                        <td>${m.x.toFixed(2)}</td>
                        <td>${m.y.toFixed(2)}</td>
                        <td>${result.toFixed(2)}</td>
                        <td><span class="badge badge-${statusClass}">${status}</span></td>
                    </tr>
                `;
            });
            
            return html;
        }

        function drawTiltChart(measurements) {
            const labels = ['ìƒë‹¨ ì¢Œì¸¡', 'ìƒë‹¨ ìš°ì¸¡', 'ì¤‘ì•™'];
            const values = measurements.map(m => m.result || 0);
            const colors = values.map(v => {
                if (v > 10.0) return '#ef4444';  // ìœ„í—˜
                if (v >= 5.0) return '#f97316';  // ê²½ê³ 
                if (v >= 3.0) return '#f59e0b';  // ì£¼ì˜
                return '#10b981';  // ì •ìƒ
            });
            
            const chartData = {
                labels: labels.slice(0, measurements.length),
                values: values,
                colors: colors,
                thresholds: {
                    upper: 10.0,
                    warning: 5.0,
                    caution: 3.0
                },
                title: 'ì§€ì ë³„ ê¸°ìš¸ê¸° ì¸¡ì • ê²°ê³¼',
                yLabel: 'ê¸°ìš¸ê¸° (Â°)'
            };
            
            drawBarChart('tiltChart', chartData);
        }

        // 5. ë³€í˜•ë¥  ë°ì´í„° ë¡œë“œ
        function loadSection5() {
            console.log('ì„¹ì…˜ 5 ë¡œë“œ: ë³€í˜•ë¥  ë°ì´í„°');
            const container = document.getElementById('section5Content');
            
            const strainData = getFromStorage(STORAGE_KEYS.STRAIN_DATA) || {};
            
            // ì¸¡ì • ë‹¨ê³„ í‘œì‹œ
            let phaseText = '-';
            if (strainData.info && strainData.info.strainPhase) {
                if (Array.isArray(strainData.info.strainPhase)) {
                    phaseText = strainData.info.strainPhase.join(', ');
                } else {
                    phaseText = strainData.info.strainPhase;
                }
            }
            
            container.innerHTML = `
                <div class="alert alert-info" style="margin-bottom: 1rem; padding: 1rem; background-color: #e0f2fe; border-left: 4px solid #0284c7; border-radius: 0.375rem;">
                    <strong style="color: #0369a1;">ğŸ“ ë³€í˜•ë¥  ê³„ì¸¡ ì•ˆë‚´</strong>
                    <p style="margin-top: 0.5rem; color: #0c4a6e;">
                        Prefab ë¶€ì¬ì˜ ì‘ë ¥ ìƒíƒœë¥¼ í™•ì¸í•˜ê¸° ìœ„í•œ ë³€í˜•ë¥  ì¸¡ì •ì…ë‹ˆë‹¤. (ë§ˆì´í¬ë¡œ ìŠ¤íŠ¸ë ˆì¸)
                    </p>
                    <div style="margin-top: 0.75rem; padding: 0.5rem; background-color: white; border-radius: 0.25rem;">
                        <strong>í‰ê°€ ê¸°ì¤€:</strong><br>
                        <span style="color: #10b981;">âœ“ ì •ìƒ: 60Î¼Îµ ë¯¸ë§Œ</span> | 
                        <span style="color: #f59e0b;">âš  ì£¼ì˜: 60~80Î¼Îµ</span> | 
                        <span style="color: #f97316;">âš ï¸ ê²½ê³ : 80~130Î¼Îµ</span> | 
                        <span style="color: #ef4444;">âŒ ìœ„í—˜: 130Î¼Îµ ì´ˆê³¼</span>
                    </div>
                </div>

                <div class="card">
                    <div class="card-header">
                        <h3 class="card-title">ê³„ì¸¡ ì •ë³´</h3>
                    </div>
                    <div class="card-body">
                        <div class="info-grid">
                            <div class="info-item">
                                <label class="info-label">ì¸¡ì • ë‹¨ê³„</label>
                                <div class="info-value">${phaseText}</div>
                            </div>
                            <div class="info-item">
                                <label class="info-label">ì¸¡ì • ì¥ë¹„</label>
                                <div class="info-value">${strainData.info?.strainDevice || '-'}</div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="card" style="margin-top: 1rem;">
                    <div class="card-header">
                        <h3 class="card-title">ë³€í˜•ë¥  ì¸¡ì • ë°ì´í„°</h3>
                    </div>
                    <div class="card-body">
                        <table>
                            <thead>
                                <tr>
                                    <th>ì¸¡ì • ì§€ì </th>
                                    <th>ì¸¡ì •ê°’ (Î¼Îµ)</th>
                                    <th>ìƒíƒœ</th>
                                </tr>
                            </thead>
                            <tbody>
                                ${generateStrainTableRows(strainData.measurements)}
                            </tbody>
                        </table>
                    </div>
                </div>

                <div class="card" style="margin-top: 1rem;">
                    <div class="card-header">
                        <h3 class="card-title">ë³€í˜•ë¥  ë¶„í¬ ê·¸ë˜í”„</h3>
                    </div>
                    <div class="card-body">
                        <div class="chart-container">
                            <canvas id="strainChart"></canvas>
                        </div>
                    </div>
                </div>
            `;
            
            // ì „ì²´ ë³€í˜•ë¥  ê·¸ë˜í”„ ì´ë¯¸ì§€ í‘œì‹œ
            const strainGraphImage = getFromStorage(STORAGE_KEYS.STRAIN_GRAPH_IMAGE);
            if (strainGraphImage) {
                container.innerHTML += `
                    <div class="card" style="margin-top: 1rem;">
                        <div class="card-header">
                            <h3 class="card-title">ì „ì²´ ë³€í˜•ë¥  ê·¸ë˜í”„</h3>
                        </div>
                        <div class="card-body">
                            <div style="text-align: center;">
                                <img src="${strainGraphImage}" alt="ì „ì²´ ë³€í˜•ë¥  ê·¸ë˜í”„" 
                                     style="max-width: 100%; height: auto; border: 1px solid #e5e7eb; border-radius: 0.375rem;">
                            </div>
                        </div>
                    </div>
                `;
            }
            
            // ê·¸ë˜í”„ ê·¸ë¦¬ê¸°
            setTimeout(() => {
                if (strainData.measurements && strainData.measurements.length > 0) {
                    drawStrainChart(strainData.measurements);
                }
            }, 100);
        }

        function generateStrainTableRows(measurements) {
            if (!measurements || measurements.length === 0) {
                return '<tr><td colspan="3" style="text-align: center;">ë°ì´í„° ì—†ìŒ</td></tr>';
            }
            
            const labels = ['ì¸¡ì 1', 'ì¸¡ì 2', 'ì¸¡ì 3'];
            let html = '';
            
            measurements.forEach((m, i) => {
                const value = m.change || 0;
                const absValue = Math.abs(value);
                const status = absValue > 130 ? 'ìœ„í—˜' : absValue >= 80 ? 'ê²½ê³ ' : absValue >= 60 ? 'ì£¼ì˜' : 'ì •ìƒ';
                const statusClass = absValue > 130 ? 'danger' : absValue >= 80 ? 'warning' : absValue >= 60 ? 'warning' : 'success';
                
                html += `
                    <tr>
                        <td>${labels[i] || `ì§€ì  ${i+1}`}</td>
                        <td>${value.toFixed(1)}</td>
                        <td><span class="badge badge-${statusClass}">${status}</span></td>
                    </tr>
                `;
            });
            
            return html;
        }

        function drawStrainChart(measurements) {
            const labels = ['ì¸¡ì 1', 'ì¸¡ì 2', 'ì¸¡ì 3'];
            const values = measurements.map(m => m.change || 0);
            const colors = values.map(v => {
                const absV = Math.abs(v);
                if (absV > 130) return '#ef4444';  // ìœ„í—˜
                if (absV >= 80) return '#f97316';  // ê²½ê³ 
                if (absV >= 60) return '#f59e0b';  // ì£¼ì˜
                return '#10b981';  // ì •ìƒ
            });
            
            const chartData = {
                labels: labels.slice(0, measurements.length),
                values: values,
                colors: colors,
                thresholds: {
                    upper: 130,
                    warning: 80,
                    caution: 60
                },
                title: 'ì§€ì ë³„ ë³€í˜•ë¥  ì¸¡ì • ê²°ê³¼',
                yLabel: 'ë³€í˜•ë¥  (Î¼Îµ)'
            };
            
            drawBarChart('strainChart', chartData);
        }

        // 6. ë¶€ì¬ ì œì‘ ì˜¤ì°¨ ë¡œë“œ
        function loadSection6() {
            console.log('ì„¹ì…˜ 6 ë¡œë“œ: ë¶€ì¬ ì œì‘ ì˜¤ì°¨');
            const container = document.getElementById('section6Content');
            
            if (!container) {
                console.error('section6Content ì»¨í…Œì´ë„ˆë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤!');
                return;
            }
            
            const errorData = getFromStorage(STORAGE_KEYS.FABRICATION_ERROR) || {};
            console.log('ë¶€ì¬ ì œì‘ ì˜¤ì°¨ ë°ì´í„°:', errorData);
            console.log('ë¶€ì¬ ì œì‘ ì˜¤ì°¨ info:', errorData.info);
            console.log('ë¶€ì¬ ì œì‘ ì˜¤ì°¨ measurements:', errorData.measurements);
            console.log('ë¶€ì¬ ì œì‘ ì˜¤ì°¨ notes:', errorData.notes);
            
            // ì‚¬ì§„ ë°ì´í„° - page6.htmlì€ 2ê°œì˜ ì‚¬ì§„ë§Œ ì‚¬ìš© (errorPhoto1, errorPhoto2)
            let photosHTML = '';
            const photos = getFromStorage(STORAGE_KEYS.PHOTOS) || {};
            console.log('ì €ì¥ëœ ì‚¬ì§„ ë°ì´í„°:', photos);
            
            for (let i = 1; i <= 2; i++) {
                const photoKey = `errorPhoto${i}`;
                const photoData = photos[photoKey];
                const photoLabel = i === 1 ? 'ë¶€ì¬ ì¸¡ë©´' : 'ë¶€ì¬ ì •ë©´';
                
                console.log(`${photoKey}:`, photoData ? 'ìˆìŒ' : 'ì—†ìŒ');
                
                if (photoData) {
                    photosHTML += `
                        <div class="photo-upload has-image">
                            <img src="${photoData}">
                        </div>
                    `;
                } else {
                    photosHTML += `
                        <div class="photo-upload">
                            <span class="placeholder">${photoLabel} (ì—†ìŒ)</span>
                        </div>
                    `;
                }
            }
            
            container.innerHTML = `
                <div class="card">
                    <div class="card-header">
                        <h3 class="card-title">ì œì‘ ì˜¤ì°¨ ì¸¡ì • ë°ì´í„°</h3>
                    </div>
                    <div class="card-body">
                        <table>
                            <thead>
                                <tr>
                                    <th>ì¸¡ì • í•­ëª©</th>
                                    <th>ì„¤ê³„ê°’ (mm)</th>
                                    <th>ì‹¤ì¸¡ê°’ (mm)</th>
                                    <th>ì˜¤ì°¨ (mm)</th>
                                    <th>í—ˆìš©ì˜¤ì°¨ (mm)</th>
                                    <th>ìƒíƒœ</th>
                                </tr>
                            </thead>
                            <tbody>
                                ${generateErrorTableRows(errorData.measurements)}
                            </tbody>
                        </table>
                    </div>
                </div>

                <div class="card" style="margin-top: 1rem;">
                    <div class="card-header">
                        <h3 class="card-title">ì œì‘ ì˜¤ì°¨ ë¶„í¬ ê·¸ë˜í”„</h3>
                    </div>
                    <div class="card-body">
                        <div class="chart-container">
                            <canvas id="errorChart"></canvas>
                        </div>
                    </div>
                </div>

                <div class="card" style="margin-top: 1rem;">
                    <div class="card-header">
                        <h3 class="card-title">ë¶€ì¬ ì‚¬ì§„</h3>
                    </div>
                    <div class="card-body">
                        <div class="error-photo-grid">
                            ${photosHTML}
                        </div>
                    </div>
                </div>
                
                ${errorData.notes ? `
                <div class="card" style="margin-top: 1rem;">
                    <div class="card-header">
                        <h3 class="card-title">ë¹„ê³  ë° íŠ¹ì´ì‚¬í•­</h3>
                    </div>
                    <div class="card-body">
                        <p style="white-space: pre-wrap;">${errorData.notes}</p>
                    </div>
                </div>
                ` : ''}
            `;
            
            console.log('ì„¹ì…˜ 6 HTML ì„¤ì • ì™„ë£Œ');
            
            // ê·¸ë˜í”„ ê·¸ë¦¬ê¸°
            setTimeout(() => {
                console.log('ì œì‘ ì˜¤ì°¨ ê·¸ë˜í”„ ê·¸ë¦¬ê¸° ì‹œë„');
                if (errorData.measurements && errorData.measurements.length > 0) {
                    console.log('ì¸¡ì • ë°ì´í„° ìˆìŒ, ê·¸ë˜í”„ ê·¸ë¦¬ê¸° ì‹œì‘');
                    try {
                        drawErrorChart(errorData.measurements);
                        console.log('ì œì‘ ì˜¤ì°¨ ê·¸ë˜í”„ ê·¸ë¦¬ê¸° ì™„ë£Œ');
                    } catch (error) {
                        console.error('ì œì‘ ì˜¤ì°¨ ê·¸ë˜í”„ ê·¸ë¦¬ê¸° ì˜¤ë¥˜:', error);
                    }
                } else {
                    console.log('ì¸¡ì • ë°ì´í„° ì—†ìŒ, ê·¸ë˜í”„ ìŠ¤í‚µ');
                }
            }, 100);
        }

        function generateErrorTableRows(measurements) {
            console.log('generateErrorTableRows í˜¸ì¶œ, measurements:', measurements);
            
            if (!measurements || measurements.length === 0) {
                console.log('ì¸¡ì • ë°ì´í„° ì—†ìŒ');
                return '<tr><td colspan="6" style="text-align: center;">ë°ì´í„° ì—†ìŒ</td></tr>';
            }
            
            // page6.htmlì˜ ì‹¤ì œ í•­ëª©ëª… ì‚¬ìš© (3ê°œë§Œ)
            const labels = ['íŒ¨ë„ ê¸¸ì´', 'íŒ¨ë„ í­', 'íŒ¨ë„ ë‘ê»˜'];
            let html = '';
            
            measurements.forEach((m, i) => {
                console.log(`ì¸¡ì • í•­ëª© ${i}:`, m);
                
                // page6.htmlì€ { design, measured, error } êµ¬ì¡° ì‚¬ìš©
                const design = m.design || 0;
                const measured = m.measured || 0;
                const error = m.error || 0;
                
                // í—ˆìš©ì˜¤ì°¨ ê³„ì‚° (page6.htmlì˜ ë¡œì§ ë³µì œ)
                let tolerance = 5; // ê¸°ë³¸ê°’
                let toleranceDisplay = 'Â±5.0';
                
                if (i === 0) { // íŒ¨ë„ ê¸¸ì´
                    const onePct = design * 0.01;
                    tolerance = Math.min(onePct, 30);
                    toleranceDisplay = `Â±${tolerance.toFixed(1)}`;
                } else if (i === 1) { // íŒ¨ë„ í­
                    const onePct = design * 0.01;
                    tolerance = Math.min(onePct, 30);
                    toleranceDisplay = `Â±${tolerance.toFixed(1)}`;
                } else if (i === 2) { // íŒ¨ë„ ë‘ê»˜
                    toleranceDisplay = '+10.0 ~ -5.0';
                    // ë‘ê»˜ëŠ” ë¹„ëŒ€ì¹­ í—ˆìš©ì˜¤ì°¨: +10mm ~ -5mm
                    const passCheck = error >= -5 && error <= 10;
                    const status = passCheck ? 'í•©ê²©' : 'ë¶ˆí•©ê²©';
                    const statusClass = passCheck ? 'success' : 'danger';
                    
                    html += `
                        <tr>
                            <td>${labels[i]}</td>
                            <td>${design.toFixed(1)}</td>
                            <td>${measured.toFixed(1)}</td>
                            <td>${error.toFixed(1)}</td>
                            <td>${toleranceDisplay}</td>
                            <td><span class="badge badge-${statusClass}">${status}</span></td>
                        </tr>
                    `;
                    return;
                }
                
                // ê¸¸ì´, í­ì€ ëŒ€ì¹­ í—ˆìš©ì˜¤ì°¨
                const status = Math.abs(error) <= tolerance ? 'í•©ê²©' : 'ë¶ˆí•©ê²©';
                const statusClass = Math.abs(error) <= tolerance ? 'success' : 'danger';
                
                html += `
                    <tr>
                        <td>${labels[i]}</td>
                        <td>${design.toFixed(1)}</td>
                        <td>${measured.toFixed(1)}</td>
                        <td>${error.toFixed(1)}</td>
                        <td>${toleranceDisplay}</td>
                        <td><span class="badge badge-${statusClass}">${status}</span></td>
                    </tr>
                `;
            });
            
            console.log('ìƒì„±ëœ HTML:', html);
            return html;
        }

        function drawErrorChart(measurements) {
            console.log('drawErrorChart í˜¸ì¶œ, measurements:', measurements);
            
            // page6.htmlì˜ ì‹¤ì œ í•­ëª©ëª… ì‚¬ìš© (3ê°œë§Œ)
            const labels = ['íŒ¨ë„ ê¸¸ì´', 'íŒ¨ë„ í­', 'íŒ¨ë„ ë‘ê»˜'];
            const values = measurements.map(m => Math.abs(m.error || 0));
            
            // ê° í•­ëª©ì˜ í—ˆìš©ì˜¤ì°¨ ê³„ì‚°
            const tolerances = measurements.map((m, i) => {
                if (i === 0 || i === 1) { // ê¸¸ì´, í­
                    const onePct = (m.design || 0) * 0.01;
                    return Math.min(onePct, 30);
                } else { // ë‘ê»˜
                    return 10; // ìƒí•œ í—ˆìš©ì˜¤ì°¨
                }
            });
            
            // í•©ê²©/ë¶ˆí•©ê²© ìƒ‰ìƒ
            const colors = measurements.map((m, i) => {
                const error = m.error || 0;
                
                if (i === 2) { // íŒ¨ë„ ë‘ê»˜ (ë¹„ëŒ€ì¹­)
                    return (error >= -5 && error <= 10) ? '#10b981' : '#ef4444';
                } else { // ê¸¸ì´, í­ (ëŒ€ì¹­)
                    const design = m.design || 0;
                    const onePct = design * 0.01;
                    const tolerance = Math.min(onePct, 30);
                    return Math.abs(error) <= tolerance ? '#10b981' : '#ef4444';
                }
            });
            
            console.log('ì°¨íŠ¸ labels:', labels.slice(0, measurements.length));
            console.log('ì°¨íŠ¸ values:', values);
            console.log('ì°¨íŠ¸ colors:', colors);
            console.log('ì°¨íŠ¸ tolerances:', tolerances);
            
            const chartData = {
                labels: labels.slice(0, measurements.length),
                values: values,
                colors: colors,
                thresholds: {
                    upper: Math.max(...tolerances)
                },
                title: 'í•­ëª©ë³„ ì œì‘ ì˜¤ì°¨',
                yLabel: 'ì˜¤ì°¨ (mm)'
            };
            
            console.log('ì°¨íŠ¸ ë°ì´í„°:', chartData);
            
            try {
                drawBarChart('errorChart', chartData);
                console.log('ì°¨íŠ¸ ê·¸ë¦¬ê¸° ì„±ê³µ');
            } catch (error) {
                console.error('ì°¨íŠ¸ ê·¸ë¦¬ê¸° ì‹¤íŒ¨:', error);
            }
        }

        // 7. ì¢…í•© ëŒ€ì‹œë³´ë“œ ë¡œë“œ
        function loadSection7() {
            console.log('ì„¹ì…˜ 7 ë¡œë“œ: ì¢…í•© ëŒ€ì‹œë³´ë“œ');
            const container = document.getElementById('section7Content');
            
            const projectData = getFromStorage(STORAGE_KEYS.PROJECT_INFO) || {};
            const surveyData = getFromStorage(STORAGE_KEYS.SURVEY_DATA) || {};
            const accelData = getFromStorage(STORAGE_KEYS.ACCELERATION_DATA) || {};
            const tiltData = getFromStorage(STORAGE_KEYS.TILT_DATA) || {};
            const strainData = getFromStorage(STORAGE_KEYS.STRAIN_DATA) || {};
            const errorData = getFromStorage(STORAGE_KEYS.FABRICATION_ERROR) || {};
            
            // ì¢…í•© í‰ê°€ ë¡œì§
            const overallStatus = calculateOverallStatus({
                survey: surveyData,
                accel: accelData,
                tilt: tiltData,
                strain: strainData,
                error: errorData
            });
            
            // ì§„í–‰ë¥  ê³„ì‚°
            let completedCount = 0;
            if (surveyData && Object.keys(surveyData).length > 0) completedCount++;
            if (accelData.measurements && accelData.measurements.length > 0) completedCount++;
            if (tiltData.measurements && tiltData.measurements.length > 0) completedCount++;
            if (strainData.measurements && strainData.measurements.length > 0) completedCount++;
            if (errorData.measurements && errorData.measurements.length > 0) completedCount++;
            
            const progressPercent = (completedCount / 5 * 100).toFixed(0);
            
            // ì£¼ìš” ì´ìŠˆ ìˆ˜ì§‘
            const issues = [];
            
            // ìš´ì†¡ê²°ê³¼ ë¦¬í¬íŠ¸ ì´ìŠˆ
            if (surveyData && Object.keys(surveyData).length > 0) {
                if (surveyData.q1 !== 'ìˆ˜ë ¹') issues.push('âš ï¸ í’ˆì§ˆë³´ì¦ì„œ ë¯¸ìˆ˜ë ¹');
                if (surveyData.q2 !== 'ì—†ìŒ') issues.push('âš ï¸ ìŠ¬ë˜ë¸Œ ì†ìƒ/ê· ì—´ ë°œê²¬');
                if (surveyData.q3 !== 'ì–‘í˜¸') issues.push('âš ï¸ ìŠ¤í€ì§€ ì¬ë£Œ ë¶€ì°© ë¶ˆëŸ‰');
                if (surveyData.q4 !== 'ì—†ìŒ') issues.push('âš ï¸ ì™€ì´ì–´/ìŠ¬ë§ë²¨íŠ¸ ê²°í•¨');
                if (surveyData.q5 !== 'ì ì¹˜ë¨') issues.push('âš ï¸ ìŠ¬ë˜ë¸Œ ë¯¸ì ì¹˜');
            }
            
            // ê°€ì†ë„ ì´ìŠˆ (0.40g ì´ˆê³¼)
            if (accelData.measurements && accelData.measurements.length > 0) {
                const maxAccel = Math.max(...accelData.measurements.map(m => m.result));
                if (maxAccel > 0.40) {
                    issues.push(`âš ï¸ ê°€ì†ë„ ìœ„í—˜ ìˆ˜ì¤€ (ìµœëŒ€ ${maxAccel.toFixed(3)}g)`);
                }
            }
            
            // ê¸°ìš¸ê¸° ì´ìŠˆ (10.0Â° ì´ˆê³¼)
            if (tiltData.measurements && tiltData.measurements.length > 0) {
                const maxTilt = Math.max(...tiltData.measurements.map(m => m.result || 0));
                if (maxTilt > 10.0) {
                    issues.push(`âš ï¸ ê¸°ìš¸ê¸° ìœ„í—˜ ìˆ˜ì¤€ (ìµœëŒ€ ${maxTilt.toFixed(2)}Â°)`);
                }
            }
            
            // ë³€í˜•ë¥  ì´ìŠˆ (130Î¼Îµ ì´ˆê³¼)
            if (strainData.measurements && strainData.measurements.length > 0) {
                const maxStrain = Math.max(...strainData.measurements.map(m => Math.abs(m.change || 0)));
                if (maxStrain > 130) {
                    issues.push(`âš ï¸ ë³€í˜•ë¥  í—ˆìš©ì¹˜ ì´ˆê³¼ (ìµœëŒ€ ${maxStrain.toFixed(1)}Î¼Îµ)`);
                }
            }
            
            // ì œì‘ ì˜¤ì°¨ ì´ìŠˆ
            if (errorData.measurements && errorData.measurements.length > 0) {
                const labels = ['íŒ¨ë„ ê¸¸ì´', 'íŒ¨ë„ í­', 'íŒ¨ë„ ë‘ê»˜'];
                errorData.measurements.forEach((m, i) => {
                    const design = m.design || 0;
                    const error = m.error || 0;
                    let isPass = false;
                    
                    if (i === 0 || i === 1) {
                        const tolerance = Math.min(design * 0.01, 30);
                        isPass = Math.abs(error) <= tolerance;
                    } else if (i === 2) {
                        isPass = error >= -5 && error <= 10;
                    }
                    
                    if (!isPass) {
                        issues.push(`âš ï¸ ${labels[i]} ì œì‘ ì˜¤ì°¨ ì´ˆê³¼ (${error.toFixed(1)}mm)`);
                    }
                });
            }
            
            const issuesHTML = issues.length > 0 
                ? `<ul style="margin: 0; padding-left: 1.5rem;">${issues.map(issue => `<li>${issue}</li>`).join('')}</ul>`
                : '<p style="text-align: center; color: var(--success-color); font-weight: 600;">âœ… ì£¼ìš” ì´ìŠˆ ì—†ìŒ</p>';
            
            container.innerHTML = `
                <!-- í”„ë¡œì íŠ¸ ì •ë³´ -->
                <div class="card">
                    <div class="card-header">
                        <h3 class="card-title">í”„ë¡œì íŠ¸ ì •ë³´</h3>
                    </div>
                    <div class="card-body">
                        <div class="info-grid">
                            <div class="info-item">
                                <div class="info-label">ê³µì‚¬ëª…</div>
                                <div class="info-value">${projectData.projectName || '-'}</div>
                            </div>
                            <div class="info-item">
                                <div class="info-label">ì ê²€ì¼</div>
                                <div class="info-value">${projectData.inspectionDate || '-'}</div>
                            </div>
                            <div class="info-item">
                                <div class="info-label">Prefab ì¢…ë¥˜</div>
                                <div class="info-value">${projectData.prefabType || '-'}</div>
                            </div>
                            <div class="info-item">
                                <div class="info-label">ì ê²€ì</div>
                                <div class="info-value">${projectData.inspector || '-'}</div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- ì¢…í•© í’ˆì§ˆ í‰ê°€ -->
                <div class="card" style="margin-top: 1rem;">
                    <div class="card-header">
                        <h3 class="card-title">ì¢…í•© í’ˆì§ˆ í‰ê°€</h3>
                    </div>
                    <div class="card-body">
                        <div class="stats-grid">
                            <div class="stat-card ${overallStatus.class}">
                                <div class="stat-label">ì¢…í•© í‰ê°€</div>
                                <div class="stat-value">${overallStatus.status}</div>
                            </div>
                            <div class="stat-card">
                                <div class="stat-label">ê²€ì‚¬ í•­ëª©</div>
                                <div class="stat-value">${overallStatus.totalItems}ê°œ</div>
                            </div>
                            <div class="stat-card success">
                                <div class="stat-label">í•©ê²© í•­ëª©</div>
                                <div class="stat-value">${overallStatus.passedItems}ê°œ</div>
                            </div>
                            <div class="stat-card ${overallStatus.failedItems > 0 ? 'danger' : ''}">
                                <div class="stat-label">ë¶ˆí•©ê²© í•­ëª©</div>
                                <div class="stat-value">${overallStatus.failedItems}ê°œ</div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- ìƒì„¸ í‰ê°€ ê²°ê³¼ -->
                <div class="card" style="margin-top: 1rem;">
                    <div class="card-header">
                        <h3 class="card-title">ìƒì„¸ í‰ê°€ ê²°ê³¼</h3>
                    </div>
                    <div class="card-body">
                        ${overallStatus.details}
                    </div>
                </div>
                
                <!-- í’ˆì§ˆê´€ë¦¬ ì§„í–‰ë¥  -->
                <div class="card" style="margin-top: 1rem;">
                    <div class="card-header">
                        <h3 class="card-title">í’ˆì§ˆê´€ë¦¬ ì§„í–‰ë¥ </h3>
                    </div>
                    <div class="card-body">
                        <div style="margin-bottom: 1rem;">
                            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 0.5rem;">
                                <span style="font-weight: 600;">ì „ì²´ ì§„í–‰ë¥ </span>
                                <span style="font-weight: 700; font-size: 1.25rem;">${progressPercent}%</span>
                            </div>
                            <div class="progress-bar">
                                <div class="progress-fill" style="width: ${progressPercent}%;">${progressPercent}%</div>
                            </div>
                        </div>
                        <div style="font-size: 0.875rem; color: var(--text-secondary);">
                            <p>ì™„ë£Œëœ í•­ëª©: <span style="font-weight: 600; color: var(--success-color);">${completedCount}</span> / 5</p>
                        </div>
                    </div>
                </div>
                
                <!-- ì£¼ìš” ì´ìŠˆ ë° ê¶Œê³ ì‚¬í•­ -->
                <div class="card" style="margin-top: 1rem;">
                    <div class="card-header">
                        <h3 class="card-title">ì£¼ìš” ì´ìŠˆ ë° ê¶Œê³ ì‚¬í•­</h3>
                    </div>
                    <div class="card-body">
                        ${issuesHTML}
                    </div>
                </div>

                <!-- ìµœì¢… í’ˆì§ˆ íŒì • -->
                <div class="card" style="margin-top: 1rem;">
                    <div class="card-header">
                        <h3 class="card-title">ìµœì¢… í’ˆì§ˆ íŒì •</h3>
                    </div>
                    <div class="card-body">
                        <div class="alert ${overallStatus.alertClass}">
                            <strong>${overallStatus.recommendation}</strong>
                        </div>
                    </div>
                </div>
            `;
        }

        function calculateOverallStatus(data) {
            let totalItems = 0;
            let passedItems = 0;
            let failedItems = 0;
            let tableRows = '';
            
            // ìš´ì†¡ê²°ê³¼ ë¦¬í¬íŠ¸ í‰ê°€ (ê° ì§ˆë¬¸ì„ ê°œë³„ í–‰ìœ¼ë¡œ)
            if (data.survey && Object.keys(data.survey).length > 0) {
                totalItems += 5;
                
                // Q1: í’ˆì§ˆë³´ì¦ì„œ ìˆ˜ë ¹
                const q1Pass = data.survey.q1 === 'ìˆ˜ë ¹';
                if (q1Pass) passedItems++; else failedItems++;
                tableRows += `
                    <tr>
                        <td>í’ˆì§ˆë³´ì¦ì„œ ìˆ˜ë ¹</td>
                        <td>${data.survey.q1 || '-'}</td>
                        <td>ìˆ˜ë ¹ í•„ìˆ˜</td>
                        <td><span class="badge ${q1Pass ? 'badge-success' : 'badge-danger'}">${q1Pass ? 'í•©ê²©' : 'ë¶ˆí•©ê²©'}</span></td>
                        <td>${q1Pass ? '-' : 'í’ˆì§ˆë³´ì¦ì„œë¥¼ ìˆ˜ë ¹í•˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤.'}</td>
                    </tr>
                `;
                
                // Q2: ìŠ¬ë˜ë¸Œ ì†ìƒ/ê· ì—´
                const q2Pass = data.survey.q2 === 'ì—†ìŒ';
                if (q2Pass) passedItems++; else failedItems++;
                tableRows += `
                    <tr>
                        <td>ìŠ¬ë˜ë¸Œ ì†ìƒ/ê· ì—´</td>
                        <td>${data.survey.q2 || '-'}</td>
                        <td>ì—†ìŒ</td>
                        <td><span class="badge ${q2Pass ? 'badge-success' : 'badge-danger'}">${q2Pass ? 'í•©ê²©' : 'ë¶ˆí•©ê²©'}</span></td>
                        <td>${q2Pass ? '-' : 'ìŠ¬ë˜ë¸Œì— ì†ìƒ ë˜ëŠ” ê· ì—´ì´ ë°œê²¬ë˜ì—ˆìŠµë‹ˆë‹¤.'}</td>
                    </tr>
                `;
                
                // Q3: ìŠ¤í€ì§€ ì¬ë£Œ ë¶€ì°©ìƒíƒœ
                const q3Pass = data.survey.q3 === 'ì–‘í˜¸';
                if (q3Pass) passedItems++; else failedItems++;
                tableRows += `
                    <tr>
                        <td>ìŠ¤í€ì§€ ì¬ë£Œ ë¶€ì°©ìƒíƒœ</td>
                        <td>${data.survey.q3 || '-'}</td>
                        <td>ì–‘í˜¸</td>
                        <td><span class="badge ${q3Pass ? 'badge-success' : 'badge-danger'}">${q3Pass ? 'í•©ê²©' : 'ë¶ˆí•©ê²©'}</span></td>
                        <td>${q3Pass ? '-' : 'ìŠ¤í€ì§€ ì¬ë£Œ ë¶€ì°©ìƒíƒœê°€ ë¶ˆëŸ‰í•©ë‹ˆë‹¤.'}</td>
                    </tr>
                `;
                
                // Q4: ì™€ì´ì–´/ìŠ¬ë§ë²¨íŠ¸ ê²°í•¨
                const q4Pass = data.survey.q4 === 'ì—†ìŒ';
                if (q4Pass) passedItems++; else failedItems++;
                tableRows += `
                    <tr>
                        <td>ì™€ì´ì–´/ìŠ¬ë§ë²¨íŠ¸ ê²°í•¨</td>
                        <td>${data.survey.q4 || '-'}</td>
                        <td>ì—†ìŒ</td>
                        <td><span class="badge ${q4Pass ? 'badge-success' : 'badge-danger'}">${q4Pass ? 'í•©ê²©' : 'ë¶ˆí•©ê²©'}</span></td>
                        <td>${q4Pass ? '-' : 'ì™€ì´ì–´ ë˜ëŠ” ìŠ¬ë§ë²¨íŠ¸ì— ê²°í•¨ì´ ë°œê²¬ë˜ì—ˆìŠµë‹ˆë‹¤.'}</td>
                    </tr>
                `;
                
                // Q5: ìŠ¬ë˜ë¸Œ ì ì¹˜
                const q5Pass = data.survey.q5 === 'ì ì¹˜ë¨';
                if (q5Pass) passedItems++; else failedItems++;
                tableRows += `
                    <tr>
                        <td>ìŠ¬ë˜ë¸Œ ì ì¹˜</td>
                        <td>${data.survey.q5 || '-'}</td>
                        <td>ì ì¹˜ë¨</td>
                        <td><span class="badge ${q5Pass ? 'badge-success' : 'badge-danger'}">${q5Pass ? 'í•©ê²©' : 'ë¶ˆí•©ê²©'}</span></td>
                        <td>${q5Pass ? '-' : 'ìŠ¬ë˜ë¸Œê°€ ì ì¹˜ë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤.'}</td>
                    </tr>
                `;
            }
            
            // ê°€ì†ë„ ìµœëŒ€ê°’ (í—ˆìš© ê¸°ì¤€: Â±0.5g, ìœ„í—˜ ê¸°ì¤€: 0.40g ì´ˆê³¼)
            if (data.accel.measurements && data.accel.measurements.length > 0) {
                totalItems++;
                const maxAccel = Math.max(...data.accel.measurements.map(m => m.result));
                const accelPass = maxAccel <= 0.40;
                if (accelPass) passedItems++; else failedItems++;
                
                tableRows += `
                    <tr>
                        <td>ê°€ì†ë„ ìµœëŒ€ê°’</td>
                        <td>${maxAccel.toFixed(3)}g</td>
                        <td>Â±0.5g</td>
                        <td><span class="badge ${accelPass ? 'badge-success' : 'badge-danger'}">${accelPass ? 'í•©ê²©' : 'ë¶ˆí•©ê²©'}</span></td>
                        <td>${accelPass ? '-' : 'ìœ„í—˜ ê¸°ì¤€(0.40g)ì„ ì´ˆê³¼í–ˆìŠµë‹ˆë‹¤.'}</td>
                    </tr>
                `;
            }
            
            // ê¸°ìš¸ê¸° ìµœëŒ€ê°’ (í—ˆìš© ê¸°ì¤€: Â±2Â°, ìœ„í—˜ ê¸°ì¤€: 10.0Â° ì´ˆê³¼)
            if (data.tilt.measurements && data.tilt.measurements.length > 0) {
                totalItems++;
                const maxTilt = Math.max(...data.tilt.measurements.map(m => m.result || 0));
                const tiltPass = maxTilt <= 10.0;
                if (tiltPass) passedItems++; else failedItems++;
                
                tableRows += `
                    <tr>
                        <td>ê¸°ìš¸ê¸° ìµœëŒ€ê°’</td>
                        <td>${maxTilt.toFixed(2)}Â°</td>
                        <td>Â±2Â°</td>
                        <td><span class="badge ${tiltPass ? 'badge-success' : 'badge-danger'}">${tiltPass ? 'í•©ê²©' : 'ë¶ˆí•©ê²©'}</span></td>
                        <td>${tiltPass ? '-' : 'ìœ„í—˜ ê¸°ì¤€(10.0Â°)ì„ ì´ˆê³¼í–ˆìŠµë‹ˆë‹¤.'}</td>
                    </tr>
                `;
            }
            
            // ë³€í˜•ë¥  ìµœëŒ€ê°’ (í—ˆìš© ê¸°ì¤€: Â±130Î¼Îµ)
            if (data.strain.measurements && data.strain.measurements.length > 0) {
                totalItems++;
                const maxStrain = Math.max(...data.strain.measurements.map(m => Math.abs(m.change || 0)));
                const strainPass = maxStrain <= 130;
                if (strainPass) passedItems++; else failedItems++;
                
                tableRows += `
                    <tr>
                        <td>ë³€í˜•ë¥  ìµœëŒ€ê°’</td>
                        <td>${maxStrain.toFixed(1)}Î¼Îµ</td>
                        <td>Â±130Î¼Îµ</td>
                        <td><span class="badge ${strainPass ? 'badge-success' : 'badge-danger'}">${strainPass ? 'í•©ê²©' : 'ë¶ˆí•©ê²©'}</span></td>
                        <td>${strainPass ? '-' : 'í—ˆìš© ê¸°ì¤€ì„ ì´ˆê³¼í–ˆìŠµë‹ˆë‹¤.'}</td>
                    </tr>
                `;
            }
            
            // ì œì‘ ì˜¤ì°¨ í‰ê°€ (ê° í•­ëª©ì„ ê°œë³„ í‰ê°€)
            if (data.error.measurements && data.error.measurements.length > 0) {
                const labels = ['íŒ¨ë„ ê¸¸ì´', 'íŒ¨ë„ í­', 'íŒ¨ë„ ë‘ê»˜'];
                const toleranceDesc = ['min(1%, 30mm)', 'min(1%, 30mm)', '+10mm ~ -5mm'];
                
                data.error.measurements.forEach((m, i) => {
                    totalItems++;
                    
                    const design = m.design || 0;
                    const error = m.error || 0;
                    let isPass = false;
                    let note = '';
                    
                    // ê° í•­ëª©ë³„ í—ˆìš©ì˜¤ì°¨ ê¸°ì¤€ (page6.htmlê³¼ ë™ì¼í•œ ë¡œì§)
                    if (i === 0 || i === 1) { // íŒ¨ë„ ê¸¸ì´, íŒ¨ë„ í­
                        const onePct = design * 0.01;
                        const tolerance = Math.min(onePct, 30);
                        isPass = Math.abs(error) <= tolerance;
                        note = isPass ? '-' : `í—ˆìš© ì˜¤ì°¨(Â±${tolerance.toFixed(1)}mm)ë¥¼ ì´ˆê³¼í–ˆìŠµë‹ˆë‹¤.`;
                    } else if (i === 2) { // íŒ¨ë„ ë‘ê»˜ (ë¹„ëŒ€ì¹­ í—ˆìš©ì˜¤ì°¨: +10mm ~ -5mm)
                        isPass = error >= -5 && error <= 10;
                        note = isPass ? '-' : 'í—ˆìš© ì˜¤ì°¨ ë²”ìœ„ë¥¼ ë²—ì–´ë‚¬ìŠµë‹ˆë‹¤.';
                    }
                    
                    if (isPass) passedItems++; else failedItems++;
                    
                    tableRows += `
                        <tr>
                            <td>${labels[i]}</td>
                            <td>${error.toFixed(1)}mm (ì„¤ê³„: ${design.toFixed(1)}mm)</td>
                            <td>${toleranceDesc[i]}</td>
                            <td><span class="badge ${isPass ? 'badge-success' : 'badge-danger'}">${isPass ? 'í•©ê²©' : 'ë¶ˆí•©ê²©'}</span></td>
                            <td>${note}</td>
                        </tr>
                    `;
                });
            }
            
            // í…Œì´ë¸” HTML ìƒì„±
            const details = `
                <table>
                    <thead>
                        <tr>
                            <th>í‰ê°€ í•­ëª©</th>
                            <th>ì¸¡ì • ê²°ê³¼</th>
                            <th>í—ˆìš© ê¸°ì¤€</th>
                            <th>íŒì •</th>
                            <th>ë¹„ê³ </th>
                        </tr>
                    </thead>
                    <tbody>
                        ${tableRows || '<tr><td colspan="5" style="text-align: center;">í‰ê°€ ë°ì´í„°ê°€ ì—†ìŠµë‹ˆë‹¤.</td></tr>'}
                    </tbody>
                </table>
            `;
            
            // ì¢…í•© í‰ê°€
            const passRate = totalItems > 0 ? (passedItems / totalItems * 100) : 0;
            let status, statusClass, recommendation, alertClass;
            
            if (passRate >= 90) {
                status = 'ìš°ìˆ˜';
                statusClass = 'success';
                recommendation = 'âœ… ëª¨ë“  í’ˆì§ˆ ê¸°ì¤€ì„ ë§Œì¡±í•©ë‹ˆë‹¤. ì‹œê³µì„ ì§„í–‰í•˜ì…”ë„ ì¢‹ìŠµë‹ˆë‹¤.';
                alertClass = 'alert-success';
            } else if (passRate >= 70) {
                status = 'ì–‘í˜¸';
                statusClass = '';
                recommendation = 'âš ï¸ ëŒ€ë¶€ë¶„ì˜ í’ˆì§ˆ ê¸°ì¤€ì„ ë§Œì¡±í•˜ë‚˜, ì¼ë¶€ í•­ëª©ì— ëŒ€í•œ ê°œì„ ì´ í•„ìš”í•©ë‹ˆë‹¤.';
                alertClass = 'alert-warning';
            } else {
                status = 'ë¶ˆí•©ê²©';
                statusClass = 'danger';
                recommendation = 'âŒ í’ˆì§ˆ ê¸°ì¤€ ë¯¸ë‹¬ì…ë‹ˆë‹¤. ì¡°ì¹˜ í›„ ì¬ê²€ì‚¬ê°€ í•„ìš”í•©ë‹ˆë‹¤.';
                alertClass = 'alert-danger';
            }
            
            return {
                status,
                class: statusClass,
                totalItems,
                passedItems,
                failedItems,
                details,
                recommendation,
                alertClass
            };
        }
    </script>
</body>
</html>
