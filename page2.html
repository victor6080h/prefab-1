<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>í’ˆì§ˆê´€ë¦¬ ì‹œìŠ¤í…œ - ìš´ì†¡ê²°ê³¼ ë¦¬í¬íŠ¸</title>
    <link rel="stylesheet" href="assets/css/style.css">
    <script src="assets/js/script.js?v=20231123-2"></script>
</head>
<body>
    <!-- í—¤ë” -->
    <header class="header">
        <div class="container">
            <h1 class="header-title">Prefab í’ˆì§ˆê´€ë¦¬ ì‹œìŠ¤í…œ</h1>
            <p class="header-subtitle">ìš´ì†¡ê²°ê³¼ ë¦¬í¬íŠ¸ (í’ˆì§ˆê´€ë¦¬ì)</p>
        </div>
    </header>

    <!-- í˜ì´ì§€ ë„¤ë¹„ê²Œì´ì…˜ -->
    <nav class="page-nav">
        <div class="container">
            <button onclick="window.location.href='index.html'" style="float: right; background: #667eea; color: white; border: none; padding: 8px 15px; border-radius: 5px; cursor: pointer; margin-top: 10px;">
                ğŸ“‹ ë³´ê³ ì„œ ëª©ë¡
            </button>
            <ul>
                <li><a href="report.html">1. ì¢…í•© ìš”ì•½</a></li>
                <li><a href="page2.html" class="active">2. ìš´ì†¡ê²°ê³¼ ë¦¬í¬íŠ¸</a></li>
                <li><a href="page3.html">3. ê°€ì†ë„ ë°ì´í„°</a></li>
                <li><a href="page4.html">4. ê¸°ìš¸ê¸° ë°ì´í„°</a></li>
                <li><a href="page5.html">5. ë³€í˜•ë¥  ë°ì´í„°</a></li>
                <li><a href="page6.html">6. ë¶€ì¬ ì œì‘ ì˜¤ì°¨</a></li>
                <li><a href="dashboard.html">7. ì¢…í•© ëŒ€ì‹œë³´ë“œ</a></li>
            </ul>
        </div>
    </nav>

    <!-- ë©”ì¸ ì»¨í…ì¸  -->
    <main class="container">
        <!-- ì„¤ë¬¸ í¼ -->
        <div class="card">
            <div class="card-header">
                <h2 class="card-title">ìš´ì†¡ê²°ê³¼ ì ê²€ í•­ëª©</h2>
                <p class="card-description">ìš´ì†¡ê²°ê³¼ ë¦¬í¬íŠ¸(í’ˆì§ˆê´€ë¦¬ì)</p>
            </div>
            <div class="card-body">
                <form id="surveyForm">
                    <!-- ì§ˆë¬¸ 1 -->
                    <fieldset>
                        <legend>1. í’ˆì§ˆë³´ì¦ì„œë¥¼ ìˆ˜ë ¹í•˜ì˜€ëŠ”ê°€?</legend>
                        <label>
                            <input type="radio" name="q1" value="ìˆ˜ë ¹" required>
                            ìˆ˜ë ¹
                        </label>
                        <label>
                            <input type="radio" name="q1" value="ë¯¸ìˆ˜ë ¹">
                            ë¯¸ìˆ˜ë ¹
                        </label>
                    </fieldset>

                    <!-- ì§ˆë¬¸ 2 -->
                    <fieldset>
                        <legend>2. ìŠ¬ë˜ë¸Œì— ì†ìƒ ë˜ëŠ” ê· ì—´ì€ ì—†ëŠ”ê°€?</legend>
                        <label>
                            <input type="radio" name="q2" value="ì—†ìŒ" required>
                            ì—†ìŒ
                        </label>
                        <label>
                            <input type="radio" name="q2" value="ì†ìƒìˆìŒ">
                            ì†ìƒ ìˆìŒ
                        </label>
                        <label>
                            <input type="radio" name="q2" value="ê· ì—´ìˆìŒ">
                            ê· ì—´ ìˆìŒ
                        </label>
                    </fieldset>

                    <!-- ì§ˆë¬¸ 3 -->
                    <fieldset>
                        <legend>3. ìŠ¬ë˜ë¸Œ í•˜ë¶€ì— ê·¸ë¼ìš°íŠ¸ ìœ ì¶œ ë°©ì§€ë¥¼ ìœ„í•œ ìŠ¤í€ì§€ ë“±ì˜ ì¬ë£Œ ë¶€ì°©ìƒíƒœëŠ” ì–‘í˜¸í•œê°€?</legend>
                        <label>
                            <input type="radio" name="q3" value="ì–‘í˜¸" required>
                            ì–‘í˜¸
                        </label>
                        <label>
                            <input type="radio" name="q3" value="ë³´í†µ">
                            ë³´í†µ
                        </label>
                        <label>
                            <input type="radio" name="q3" value="ë¶ˆëŸ‰">
                            ë¶ˆëŸ‰
                        </label>
                    </fieldset>

                    <!-- ì§ˆë¬¸ 4 -->
                    <fieldset>
                        <legend>4. ìŠ¬ë˜ë¸Œ ì¸ì–‘ì‹œ ì‚¬ìš©í•˜ëŠ” ì™€ì´ì–´ ë˜ëŠ” ìŠ¬ë§ë²¨íŠ¸ëŠ” ê²°í•¨ ë° íŒŒì†ì´ ì—†ëŠ”ê°€?</legend>
                        <label>
                            <input type="radio" name="q4" value="ì—†ìŒ" required>
                            ì—†ìŒ
                        </label>
                        <label>
                            <input type="radio" name="q4" value="ê²°í•¨ìˆìŒ">
                            ê²°í•¨ ìˆìŒ
                        </label>
                        <label>
                            <input type="radio" name="q4" value="íŒŒì†ìˆìŒ">
                            íŒŒì† ìˆìŒ
                        </label>
                    </fieldset>

                    <!-- ì§ˆë¬¸ 5 -->
                    <fieldset>
                        <legend>5. ìŠ¬ë˜ë¸ŒëŠ” ìƒì°¨ ìˆœì„œë¥¼ ê³ ë ¤í•˜ì—¬ ì ì¹˜ ë˜ì—ˆëŠ”ê°€?</legend>
                        <label>
                            <input type="radio" name="q5" value="ì ì¹˜ë¨" required>
                            ì ì¹˜ë¨
                        </label>
                        <label>
                            <input type="radio" name="q5" value="ë¶€ë¶„ì ì¹˜">
                            ë¶€ë¶„ ì ì¹˜
                        </label>
                        <label>
                            <input type="radio" name="q5" value="ë¯¸ì ì¹˜">
                            ë¯¸ì ì¹˜
                        </label>
                    </fieldset>

                    <!-- ì¶”ê°€ ì˜ê²¬ -->
                    <fieldset>
                        <legend>ì¶”ê°€ ì˜ê²¬ ë° íŠ¹ì´ì‚¬í•­</legend>
                        <textarea name="comments" rows="5" 
                                  placeholder="ë°œê²¬ëœ ë¬¸ì œì ì´ë‚˜ íŠ¹ì´ì‚¬í•­ì„ ê¸°ë¡í•˜ì„¸ìš”..."
                                  style="width: 100%; resize: vertical;"></textarea>
                    </fieldset>
                </form>
            </div>
        </div>

        <!-- í˜„ì¥ ì‚¬ì§„ -->
        <div class="card">
            <div class="card-header">
                <h2 class="card-title">í˜„ì¥ ì‚¬ì§„</h2>
            </div>
            <div class="card-body">
                <!-- 2x2 ê·¸ë¦¬ë“œ ë ˆì´ì•„ì›ƒ (4ì¥) -->
                <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 1.5rem;">
                    <!-- ì‚¬ì§„ 1: ë¶€ì¬ ì¸¡ë©´ -->
                    <div>
                        <h4 style="margin: 0 0 0.5rem 0; font-size: 0.95rem; color: var(--text-primary);">ğŸ“· ë¶€ì¬ ì¸¡ë©´</h4>
                        <label for="fileInput1" class="photo-upload" style="margin: 0;">
                            <input type="file" id="fileInput1" accept="image/*" style="display: none;">
                            <img id="photo1Preview" style="display:none;">
                            <span class="placeholder">í´ë¦­í•˜ì—¬ ì—…ë¡œë“œ</span>
                        </label>
                    </div>

                    <!-- ì‚¬ì§„ 2: ë¶€ì¬ ì •ë©´ -->
                    <div>
                        <h4 style="margin: 0 0 0.5rem 0; font-size: 0.95rem; color: var(--text-primary);">ğŸ“· ë¶€ì¬ ì •ë©´</h4>
                        <label for="fileInput2" class="photo-upload" style="margin: 0;">
                            <input type="file" id="fileInput2" accept="image/*" style="display: none;">
                            <img id="photo2Preview" style="display:none;">
                            <span class="placeholder">í´ë¦­í•˜ì—¬ ì—…ë¡œë“œ</span>
                        </label>
                    </div>

                    <!-- ì‚¬ì§„ 3: ë¶€ì¬ ìƒë¶€ -->
                    <div>
                        <h4 style="margin: 0 0 0.5rem 0; font-size: 0.95rem; color: var(--text-primary);">ğŸ“· ë¶€ì¬ ìƒë¶€</h4>
                        <label for="fileInput3" class="photo-upload" style="margin: 0;">
                            <input type="file" id="fileInput3" accept="image/*" style="display: none;">
                            <img id="photo3Preview" style="display:none;">
                            <span class="placeholder">í´ë¦­í•˜ì—¬ ì—…ë¡œë“œ</span>
                        </label>
                    </div>

                    <!-- ì‚¬ì§„ 4: ë¶€ì¬ í•˜ë¶€ -->
                    <div>
                        <h4 style="margin: 0 0 0.5rem 0; font-size: 0.95rem; color: var(--text-primary);">ğŸ“· ë¶€ì¬ í•˜ë¶€</h4>
                        <label for="fileInput4" class="photo-upload" style="margin: 0;">
                            <input type="file" id="fileInput4" accept="image/*" style="display: none;">
                            <img id="photo4Preview" style="display:none;">
                            <span class="placeholder">í´ë¦­í•˜ì—¬ ì—…ë¡œë“œ</span>
                        </label>
                    </div>
                </div>
            </div>
        </div>

        <!-- ì„¤ë¬¸ ê²°ê³¼ ìš”ì•½ -->
        <div class="card">
            <div class="card-header">
                <h2 class="card-title">ì ê²€ ê²°ê³¼ ìš”ì•½</h2>
            </div>
            <div class="card-body">
                <div id="surveyResult">
                    <p class="text-center" style="color: var(--text-secondary);">
                        ì ê²€ì„ ì™„ë£Œí•˜ë©´ ê²°ê³¼ê°€ ì—¬ê¸°ì— í‘œì‹œë©ë‹ˆë‹¤.
                    </p>
                </div>
                <div class="progress-bar mt-3">
                    <div class="progress-fill" id="surveyProgress" style="width: 0%;">0%</div>
                </div>
            </div>
        </div>

        <!-- ë„¤ë¹„ê²Œì´ì…˜ ë²„íŠ¼ -->
        <div class="nav-buttons">
            <a href="index.html" class="btn btn-secondary">â† ì´ì „: ì¢…í•© ìš”ì•½</a>
            <button class="btn btn-success" onclick="saveSurvey()">ğŸ’¾ ì €ì¥í•˜ê¸°</button>
            <button class="btn btn-info" onclick="checkStoredPhotos()" style="background-color: #17a2b8;">ğŸ” ì‚¬ì§„ ë°ì´í„° í™•ì¸</button>
            <a href="page3.html" class="btn btn-primary">ë‹¤ìŒ: ê°€ì†ë„ ë°ì´í„° â†’</a>
        </div>
    </main>

    <script>
        // ì‚¬ì§„ í´ë¦­ í•¸ë“¤ëŸ¬
        function handlePhotoClick(inputId) {
            console.log('=== handlePhotoClick í˜¸ì¶œ ===');
            console.log('inputId:', inputId);
            
            const input = document.getElementById(inputId);
            console.log('input ìš”ì†Œ:', input);
            
            if (input) {
                console.log('input.click() ì‹¤í–‰');
                input.click();
            } else {
                console.error('âŒ input ìš”ì†Œë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤:', inputId);
                alert('íŒŒì¼ ì…ë ¥ ìš”ì†Œë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤. í˜ì´ì§€ë¥¼ ìƒˆë¡œê³ ì¹¨í•´ì£¼ì„¸ìš”.');
            }
        }
        
        document.addEventListener('DOMContentLoaded', function() {
            console.log('í˜ì´ì§€ ë¡œë“œ ì‹œì‘');
            
            // ì €ì¥ëœ ë°ì´í„° í™•ì¸
            const savedData = getFromStorage(STORAGE_KEYS.SURVEY_DATA);
            console.log('ì €ì¥ëœ ì„¤ë¬¸ ë°ì´í„°:', savedData);
            
            // í¼ ë°ì´í„° ë¡œë“œ
            loadFormData('surveyForm', STORAGE_KEYS.SURVEY_DATA);
            console.log('í¼ ë°ì´í„° ë¡œë“œ ì™„ë£Œ');
            
            // ìë™ ì €ì¥ ì„¤ì •
            autoSaveForm('surveyForm', STORAGE_KEYS.SURVEY_DATA);
            console.log('ìë™ ì €ì¥ ì„¤ì • ì™„ë£Œ');
            
            // ì €ì¥ëœ ì´ë¯¸ì§€ ë¡œë“œ (DOMì´ ì™„ì „íˆ ë¡œë“œëœ í›„)
            console.log('ì´ë¯¸ì§€ ë¡œë“œ ì‹œì‘...');
            
            // LocalStorageì— ì €ì¥ëœ ì‚¬ì§„ ë°ì´í„° í™•ì¸
            const savedPhotos = getFromStorage(STORAGE_KEYS.PHOTOS);
            console.log('ì €ì¥ëœ ì‚¬ì§„ ë°ì´í„°:', savedPhotos);
            
            setTimeout(function() {
                console.log('ì´ë¯¸ì§€ ë¡œë“œ ì‹¤í–‰ (100ms í›„)');
                loadSavedImage('photo1Preview');
                loadSavedImage('photo2Preview');
                loadSavedImage('photo3Preview');
                loadSavedImage('photo4Preview');
                console.log('ì´ë¯¸ì§€ ë¡œë“œ ì™„ë£Œ');
            }, 100);
            
            // í¼ ë³€ê²½ ì‹œ ì§„í–‰ë¥  ì—…ë°ì´íŠ¸
            const surveyForm = document.getElementById('surveyForm');
            if (surveyForm) {
                surveyForm.addEventListener('change', function() {
                    console.log('í¼ ë³€ê²½ ê°ì§€ - ìë™ ì €ì¥ ì‹¤í–‰');
                    updateSurveyProgress();
                });
            }
            
            // ì´ˆê¸° ì§„í–‰ë¥  ê³„ì‚°
            updateSurveyProgress();
            console.log('ì´ˆê¸° ì§„í–‰ë¥  ê³„ì‚° ì™„ë£Œ');
            
            // ì‚¬ì§„ ì—…ë¡œë“œ ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ë“±ë¡
            console.log('ì‚¬ì§„ ì—…ë¡œë“œ ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ë“±ë¡ ì‹œì‘');
            document.getElementById('fileInput1').addEventListener('change', function() {
                console.log('fileInput1 change ì´ë²¤íŠ¸ ë°œìƒ');
                previewImage(this, 'photo1Preview');
            });
            document.getElementById('fileInput2').addEventListener('change', function() {
                console.log('fileInput2 change ì´ë²¤íŠ¸ ë°œìƒ');
                previewImage(this, 'photo2Preview');
            });
            document.getElementById('fileInput3').addEventListener('change', function() {
                console.log('fileInput3 change ì´ë²¤íŠ¸ ë°œìƒ');
                previewImage(this, 'photo3Preview');
            });
            document.getElementById('fileInput4').addEventListener('change', function() {
                console.log('fileInput4 change ì´ë²¤íŠ¸ ë°œìƒ');
                previewImage(this, 'photo4Preview');
            });
            console.log('ì‚¬ì§„ ì—…ë¡œë“œ ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ë“±ë¡ ì™„ë£Œ');
        });

        // ì„¤ë¬¸ ì§„í–‰ë¥  ì—…ë°ì´íŠ¸
        function updateSurveyProgress() {
            const form = document.getElementById('surveyForm');
            const totalQuestions = 5; // ì „ì²´ ì§ˆë¬¸ ìˆ˜
            let answeredQuestions = 0;

            // ê° ì§ˆë¬¸ë³„ë¡œ ë‹µë³€ ì—¬ë¶€ í™•ì¸
            for (let i = 1; i <= totalQuestions; i++) {
                const question = form.querySelector(`input[name="q${i}"]:checked`);
                if (question) {
                    answeredQuestions++;
                }
            }

            // ì§„í–‰ë¥  ê³„ì‚°
            const progress = Math.round((answeredQuestions / totalQuestions) * 100);
            const progressBar = document.getElementById('surveyProgress');
            progressBar.style.width = progress + '%';
            progressBar.textContent = progress + '%';

            // ì§„í–‰ë¥ ì— ë”°ë¥¸ ìƒ‰ìƒ ë³€ê²½
            progressBar.className = 'progress-fill';
            if (progress === 100) {
                progressBar.classList.add('success');
                showSurveyResult();
            } else if (progress >= 50) {
                progressBar.classList.add('warning');
            }
        }

        // ì„¤ë¬¸ ê²°ê³¼ í‘œì‹œ
        function showSurveyResult() {
            const form = document.getElementById('surveyForm');
            const formData = new FormData(form);
            
            let passCount = 0;
            let failCount = 0;
            let warningCount = 0;

            // ê° ì§ˆë¬¸ì˜ ë‹µë³€ í‰ê°€
            const evaluations = {
                q1: { pass: ['ìˆ˜ë ¹'], fail: ['ë¯¸ìˆ˜ë ¹'] },
                q2: { pass: ['ì—†ìŒ'], fail: ['ì†ìƒìˆìŒ', 'ê· ì—´ìˆìŒ'] },
                q3: { pass: ['ì–‘í˜¸'], warning: ['ë³´í†µ'], fail: ['ë¶ˆëŸ‰'] },
                q4: { pass: ['ì—†ìŒ'], fail: ['ê²°í•¨ìˆìŒ', 'íŒŒì†ìˆìŒ'] },
                q5: { pass: ['ì ì¹˜ë¨'], warning: ['ë¶€ë¶„ì ì¹˜'], fail: ['ë¯¸ì ì¹˜'] }
            };

            for (let i = 1; i <= 5; i++) {
                const answer = formData.get(`q${i}`);
                const eval = evaluations[`q${i}`];
                
                if (eval.pass && eval.pass.includes(answer)) {
                    passCount++;
                } else if (eval.fail && eval.fail.includes(answer)) {
                    failCount++;
                } else if (eval.warning && eval.warning.includes(answer)) {
                    warningCount++;
                }
            }

            // ê²°ê³¼ HTML ìƒì„±
            let resultHTML = `
                <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 1rem; margin-bottom: 1rem;">
                    <div class="stat-card success">
                        <div class="stat-label">ì í•©</div>
                        <div class="stat-value">${passCount}</div>
                    </div>
                    <div class="stat-card warning">
                        <div class="stat-label">ì£¼ì˜</div>
                        <div class="stat-value">${warningCount}</div>
                    </div>
                    <div class="stat-card danger">
                        <div class="stat-label">ë¶€ì í•©</div>
                        <div class="stat-value">${failCount}</div>
                    </div>
                </div>
            `;

            // ì¢…í•© í‰ê°€
            if (failCount === 0 && warningCount === 0) {
                resultHTML += `<div class="alert alert-success">
                    <strong>âœ… í’ˆì§ˆ ì í•©</strong><br>
                    ëª¨ë“  í•­ëª©ì´ ê¸°ì¤€ì„ ë§Œì¡±í•©ë‹ˆë‹¤.
                </div>`;
            } else if (failCount === 0) {
                resultHTML += `<div class="alert alert-warning">
                    <strong>âš ï¸ ì£¼ì˜ í•„ìš”</strong><br>
                    ${warningCount}ê°œ í•­ëª©ì—ì„œ ì£¼ì˜ê°€ í•„ìš”í•©ë‹ˆë‹¤. í™•ì¸ í›„ ì¡°ì¹˜í•˜ì„¸ìš”.
                </div>`;
            } else {
                resultHTML += `<div class="alert alert-danger">
                    <strong>âŒ í’ˆì§ˆ ë¶€ì í•©</strong><br>
                    ${failCount}ê°œ í•­ëª©ì´ ê¸°ì¤€ì„ ë§Œì¡±í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤. ì¦‰ì‹œ ì¡°ì¹˜ê°€ í•„ìš”í•©ë‹ˆë‹¤.
                </div>`;
            }

            document.getElementById('surveyResult').innerHTML = resultHTML;
        }

        // ì €ì¥ëœ ì‚¬ì§„ ë°ì´í„° í™•ì¸
        function checkStoredPhotos() {
            console.log('=== ì‚¬ì§„ ë°ì´í„° í™•ì¸ ì‹œì‘ ===');
            const photos = getFromStorage(STORAGE_KEYS.PHOTOS);
            
            if (!photos) {
                alert('ì €ì¥ëœ ì‚¬ì§„ì´ ì—†ìŠµë‹ˆë‹¤.\n\në¨¼ì € ì‚¬ì§„ì„ ì—…ë¡œë“œí•´ì£¼ì„¸ìš”.');
                console.log('ì €ì¥ëœ ì‚¬ì§„ ë°ì´í„°: null');
                return;
            }
            
            const photoKeys = Object.keys(photos);
            const photoCount = photoKeys.length;
            
            // ìš´ì†¡ê²°ê³¼ ë¦¬í¬íŠ¸ ì‚¬ì§„ë§Œ í•„í„°ë§
            const transportPhotos = photoKeys.filter(key => key.startsWith('photo') && key.endsWith('Preview'));
            const transportPhotoCount = transportPhotos.length;
            
            console.log('=== ì €ì¥ëœ ì‚¬ì§„ ë°ì´í„° í™•ì¸ ===');
            console.log('ì‚¬ì§„ ê°œìˆ˜:', photoCount);
            console.log('ì‚¬ì§„ ID ëª©ë¡:', photoKeys);
            
            photoKeys.forEach(key => {
                const dataSize = photos[key] ? photos[key].length : 0;
                console.log(`${key}: ${(dataSize / 1024).toFixed(2)} KB`);
            });
            
            // ìƒì„¸ ì •ë³´ ìƒì„±
            let detailInfo = `ğŸ“Š ì „ì²´ ì €ì¥ëœ ì‚¬ì§„: ${photoCount}ê°œ\n`;
            detailInfo += `ğŸ“· ìš´ì†¡ê²°ê³¼ ë¦¬í¬íŠ¸ ì‚¬ì§„: ${transportPhotoCount}ê°œ\n\n`;
            detailInfo += `--- ì‚¬ì§„ ëª©ë¡ ---\n`;
            
            for (let i = 1; i <= 4; i++) {
                const key = `photo${i}Preview`;
                if (photos[key]) {
                    const size = (photos[key].length / 1024).toFixed(2);
                    detailInfo += `âœ… ì‚¬ì§„ ${i}: ${size} KB\n`;
                } else {
                    detailInfo += `âŒ ì‚¬ì§„ ${i}: ì—†ìŒ\n`;
                }
            }
            
            detailInfo += `\nìì„¸í•œ ì •ë³´ëŠ” ì½˜ì†”(F12)ì„ í™•ì¸í•˜ì„¸ìš”.`;
            
            alert(detailInfo);
        }
        
        // ì„¤ë¬¸ ì €ì¥
        function saveSurvey() {
            const form = document.getElementById('surveyForm');
            
            if (!form) {
                console.error('ì„¤ë¬¸ í¼ì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.');
                alert('í¼ì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤. í˜ì´ì§€ë¥¼ ìƒˆë¡œê³ ì¹¨í•´ì£¼ì„¸ìš”.');
                return;
            }
            
            // í•„ìˆ˜ ì§ˆë¬¸ í™•ì¸
            let allAnswered = true;
            let unansweredQuestions = [];
            
            for (let i = 1; i <= 5; i++) {
                const question = form.querySelector(`input[name="q${i}"]:checked`);
                if (!question) {
                    allAnswered = false;
                    unansweredQuestions.push(i);
                }
            }

            if (!allAnswered) {
                alert(`ëª¨ë“  ì§ˆë¬¸ì— ë‹µë³€í•´ ì£¼ì„¸ìš”.\në¯¸ë‹µë³€ ì§ˆë¬¸: ${unansweredQuestions.join(', ')}ë²ˆ`);
                return;
            }

            // í¼ ë°ì´í„° ì €ì¥
            const formData = new FormData(form);
            const data = {};
            
            for (let [key, value] of formData.entries()) {
                data[key] = value;
            }
            
            console.log('ì €ì¥í•  ë°ì´í„°:', data);
            
            // LocalStorageì— ì €ì¥
            const saveResult = saveToStorage(STORAGE_KEYS.SURVEY_DATA, data);
            
            if (saveResult !== false) {
                console.log('ì €ì¥ ì„±ê³µ:', STORAGE_KEYS.SURVEY_DATA);
                
                // ì €ì¥ëœ ë°ì´í„° í™•ì¸
                const savedData = getFromStorage(STORAGE_KEYS.SURVEY_DATA);
                console.log('ì €ì¥ëœ ë°ì´í„° í™•ì¸:', savedData);
                
                alert('âœ… ìš´ì†¡ê²°ê³¼ ë¦¬í¬íŠ¸ê°€ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤!');
                updateSurveyProgress();
            } else {
                console.error('ì €ì¥ ì‹¤íŒ¨');
                alert('âŒ ì €ì¥ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤. ë‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš”.');
            }
        }
    </script>
</body>
</html>
