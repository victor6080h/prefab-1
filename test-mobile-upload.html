<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ëª¨ë°”ì¼ ì—…ë¡œë“œ í…ŒìŠ¤íŠ¸</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
            padding: 20px;
            max-width: 600px;
            margin: 0 auto;
        }
        
        .photo-upload {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            min-height: 200px;
            border: 2px dashed #ccc;
            border-radius: 8px;
            cursor: pointer;
            margin: 20px 0;
            background: #f9f9f9;
            transition: all 0.3s;
        }
        
        .photo-upload:hover {
            border-color: #0066cc;
            background: #f0f8ff;
        }
        
        .photo-upload.has-image {
            border-style: solid;
            border-color: #0066cc;
        }
        
        .photo-upload img {
            max-width: 100%;
            max-height: 300px;
            display: none;
        }
        
        .photo-upload .placeholder {
            font-size: 16px;
            color: #666;
        }
        
        .log-container {
            background: #f5f5f5;
            border: 1px solid #ddd;
            padding: 10px;
            margin-top: 20px;
            max-height: 400px;
            overflow-y: auto;
            font-family: monospace;
            font-size: 12px;
        }
        
        .log-entry {
            margin: 5px 0;
            padding: 5px;
            border-bottom: 1px solid #e0e0e0;
        }
        
        .info { color: #0066cc; }
        .success { color: #00cc00; }
        .error { color: #cc0000; }
        .warning { color: #ff8800; }
    </style>
</head>
<body>
    <h1>ğŸ“± ëª¨ë°”ì¼ ì‚¬ì§„ ì—…ë¡œë“œ í…ŒìŠ¤íŠ¸</h1>
    
    <div class="info-box">
        <h3>í˜„ì¬ í™˜ê²½ ì •ë³´:</h3>
        <div id="deviceInfo"></div>
    </div>
    
    <h3>í…ŒìŠ¤íŠ¸ 1: ê¸°ë³¸ file input</h3>
    <label for="fileInput1" class="photo-upload">
        <input type="file" id="fileInput1" accept="image/*" style="display: none;">
        <img id="photo1Preview" style="display:none;">
        <span class="placeholder">í´ë¦­í•˜ì—¬ ì—…ë¡œë“œ (ê¸°ë³¸)</span>
    </label>
    
    <h3>í…ŒìŠ¤íŠ¸ 2: capture ì†ì„± ì¶”ê°€</h3>
    <label for="fileInput2" class="photo-upload">
        <input type="file" id="fileInput2" accept="image/*" capture="environment" style="display: none;">
        <img id="photo2Preview" style="display:none;">
        <span class="placeholder">í´ë¦­í•˜ì—¬ ì—…ë¡œë“œ (capture)</span>
    </label>
    
    <h3>í…ŒìŠ¤íŠ¸ 3: multiple ì†ì„± ì¶”ê°€</h3>
    <label for="fileInput3" class="photo-upload">
        <input type="file" id="fileInput3" accept="image/*" multiple style="display: none;">
        <img id="photo3Preview" style="display:none;">
        <span class="placeholder">í´ë¦­í•˜ì—¬ ì—…ë¡œë“œ (multiple)</span>
    </label>
    
    <div class="log-container" id="logContainer">
        <div class="log-entry info">ë¡œê·¸ê°€ ì—¬ê¸°ì— í‘œì‹œë©ë‹ˆë‹¤...</div>
    </div>
    
    <script>
        // ë¡œê·¸ í•¨ìˆ˜
        function log(message, type = 'info') {
            console.log(message);
            const logContainer = document.getElementById('logContainer');
            const entry = document.createElement('div');
            entry.className = `log-entry ${type}`;
            entry.textContent = `[${new Date().toLocaleTimeString()}] ${message}`;
            logContainer.appendChild(entry);
            logContainer.scrollTop = logContainer.scrollHeight;
        }
        
        // ë””ë°”ì´ìŠ¤ ì •ë³´ í‘œì‹œ
        function displayDeviceInfo() {
            const deviceInfo = document.getElementById('deviceInfo');
            const info = {
                'ì‚¬ìš©ì ì—ì´ì „íŠ¸': navigator.userAgent,
                'í”Œë«í¼': navigator.platform,
                'í™”ë©´ í¬ê¸°': `${window.screen.width}x${window.screen.height}`,
                'ë·°í¬íŠ¸ í¬ê¸°': `${window.innerWidth}x${window.innerHeight}`,
                'í„°ì¹˜ ì§€ì›': 'ontouchstart' in window,
                'File API ì§€ì›': !!(window.File && window.FileReader && window.FileList && window.Blob)
            };
            
            let html = '<ul>';
            for (const [key, value] of Object.entries(info)) {
                html += `<li><strong>${key}:</strong> ${value}</li>`;
            }
            html += '</ul>';
            deviceInfo.innerHTML = html;
            
            log('ë””ë°”ì´ìŠ¤ ì •ë³´ ë¡œë“œ ì™„ë£Œ', 'success');
        }
        
        // ì´ë¯¸ì§€ ë¯¸ë¦¬ë³´ê¸° í•¨ìˆ˜
        function previewImage(input, previewId, testName) {
            log(`=== ${testName} ì‹œì‘ ===`, 'info');
            log(`Input element: ${input.id}`, 'info');
            
            if (!input || !input.files || !input.files[0]) {
                log('íŒŒì¼ì´ ì„ íƒë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤', 'error');
                return;
            }
            
            const file = input.files[0];
            log(`íŒŒì¼ ì„ íƒë¨: ${file.name}`, 'success');
            log(`íŒŒì¼ í¬ê¸°: ${(file.size / 1024 / 1024).toFixed(2)} MB`, 'info');
            log(`íŒŒì¼ íƒ€ì…: ${file.type}`, 'info');
            
            // ì´ë¯¸ì§€ íŒŒì¼ íƒ€ì… ì²´í¬
            if (!file.type.startsWith('image/')) {
                log('ì´ë¯¸ì§€ íŒŒì¼ì´ ì•„ë‹™ë‹ˆë‹¤!', 'error');
                alert('ì´ë¯¸ì§€ íŒŒì¼ë§Œ ì—…ë¡œë“œ ê°€ëŠ¥í•©ë‹ˆë‹¤.');
                input.value = '';
                return;
            }
            
            const preview = document.getElementById(previewId);
            const container = preview.closest('.photo-upload');
            const placeholder = container.querySelector('.placeholder');
            
            log('FileReaderë¡œ ì´ë¯¸ì§€ ì½ê¸° ì‹œì‘...', 'info');
            
            const reader = new FileReader();
            reader.onload = function(e) {
                log('FileReader ì½ê¸° ì™„ë£Œ', 'success');
                
                preview.src = e.target.result;
                preview.style.display = 'block';
                
                if (placeholder) {
                    placeholder.style.display = 'none';
                }
                
                container.classList.add('has-image');
                
                log('âœ… ì´ë¯¸ì§€ ë¯¸ë¦¬ë³´ê¸° í‘œì‹œ ì™„ë£Œ', 'success');
            };
            
            reader.onerror = function(error) {
                log(`FileReader ì˜¤ë¥˜: ${error}`, 'error');
            };
            
            reader.readAsDataURL(file);
        }
        
        // ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ë“±ë¡
        document.getElementById('fileInput1').addEventListener('change', function(e) {
            log('fileInput1 change ì´ë²¤íŠ¸ ë°œìƒ', 'info');
            previewImage(this, 'photo1Preview', 'í…ŒìŠ¤íŠ¸ 1');
        });
        
        document.getElementById('fileInput2').addEventListener('change', function(e) {
            log('fileInput2 change ì´ë²¤íŠ¸ ë°œìƒ', 'info');
            previewImage(this, 'photo2Preview', 'í…ŒìŠ¤íŠ¸ 2');
        });
        
        document.getElementById('fileInput3').addEventListener('change', function(e) {
            log('fileInput3 change ì´ë²¤íŠ¸ ë°œìƒ', 'info');
            previewImage(this, 'photo3Preview', 'í…ŒìŠ¤íŠ¸ 3');
        });
        
        // label í´ë¦­ ì´ë²¤íŠ¸ ë¡œê¹…
        document.querySelectorAll('.photo-upload').forEach((label, index) => {
            label.addEventListener('click', function() {
                log(`Label ${index + 1} í´ë¦­ë¨`, 'info');
            });
        });
        
        // ì´ˆê¸°í™”
        displayDeviceInfo();
        log('í…ŒìŠ¤íŠ¸ í˜ì´ì§€ ì´ˆê¸°í™” ì™„ë£Œ', 'success');
    </script>
</body>
</html>
