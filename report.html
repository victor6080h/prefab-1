<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>í’ˆì§ˆê´€ë¦¬ ì‹œìŠ¤í…œ - ì¢…í•© ìš”ì•½</title>
    <link rel="stylesheet" href="assets/css/style.css">
    <script defer src="assets/js/script.js"></script>
</head>
<body>
    <!-- í—¤ë” -->
    <header class="header">
        <div class="container">
            <h1 class="header-title">Prefab í’ˆì§ˆê´€ë¦¬ ì‹œìŠ¤í…œ</h1>
            <p class="header-subtitle">ì¢…í•© ìš”ì•½ í˜ì´ì§€</p>
        </div>
    </header>

    <!-- í˜ì´ì§€ ë„¤ë¹„ê²Œì´ì…˜ -->
    <nav class="page-nav">
        <div class="container">
            <button onclick="window.location.href='index.html'" style="float: right; background: #667eea; color: white; border: none; padding: 8px 15px; border-radius: 5px; cursor: pointer; margin-top: 10px;">
                ğŸ“‹ ë³´ê³ ì„œ ëª©ë¡
            </button>
            <ul>
                <li><a href="report.html" class="active">1. ì¢…í•© ìš”ì•½</a></li>
                <li><a href="page2.html">2. ìš´ì†¡ê²°ê³¼ ë¦¬í¬íŠ¸</a></li>
                <li><a href="page3.html">3. ê°€ì†ë„ ë°ì´í„°</a></li>
                <li><a href="page4.html">4. ê¸°ìš¸ê¸° ë°ì´í„°</a></li>
                <li><a href="page5.html">5. ë³€í˜•ë¥  ë°ì´í„°</a></li>
                <li><a href="page6.html">6. ë¶€ì¬ ì œì‘ ì˜¤ì°¨</a></li>
                <li><a href="dashboard.html">7. ì¢…í•© ëŒ€ì‹œë³´ë“œ</a></li>
            </ul>
        </div>
    </nav>

    <!-- ë©”ì¸ ì»¨í…ì¸  -->
    <main class="container">
        <!-- í”„ë¡œì íŠ¸ ì •ë³´ -->
        <section class="project-info">
            <h2 class="mb-3">í”„ë¡œì íŠ¸ ì •ë³´</h2>
            <form id="projectInfoForm">
                <div class="info-grid">
                    <div class="info-item">
                        <label class="info-label" for="projectName">ê³µì‚¬ëª…</label>
                        <input type="text" id="projectName" name="projectName" class="info-value" 
                               placeholder="ê³µì‚¬ëª…ì„ ì…ë ¥í•˜ì„¸ìš”" required>
                    </div>
                    <div class="info-item">
                        <label class="info-label" for="inspectionDate">ì ê²€ì¼</label>
                        <input type="date" id="inspectionDate" name="inspectionDate" class="info-value" required>
                    </div>
                    <div class="info-item">
                        <label class="info-label" for="prefabType">Prefab ì¢…ë¥˜</label>
                        <select id="prefabType" name="prefabType" class="info-value" required>
                            <option value="">ì„ íƒí•˜ì„¸ìš”</option>
                            <option value="ê¸°ë‘¥">ê¸°ë‘¥</option>
                            <option value="ë³´">ë³´</option>
                            <option value="ìŠ¬ë˜ë¸Œ">ìŠ¬ë˜ë¸Œ</option>
                            <option value="ë²½ì²´">ë²½ì²´</option>
                            <option value="ê³„ë‹¨">ê³„ë‹¨</option>
                            <option value="ë²„ìŠ¤ì •ì°¨ëŒ€ í”„ë¦¬ìºìŠ¤íŠ¸ ë°”ë‹¥íŒ">ë²„ìŠ¤ì •ì°¨ëŒ€ í”„ë¦¬ìºìŠ¤íŠ¸ ë°”ë‹¥íŒ</option>
                            <option value="ê¸°íƒ€">ê¸°íƒ€</option>
                        </select>
                    </div>
                    <div class="info-item">
                        <label class="info-label" for="location">ì„¤ì¹˜ ìœ„ì¹˜</label>
                        <input type="text" id="location" name="location" class="info-value" 
                               placeholder="ì˜ˆ: 3ì¸µ Aë™" required>
                    </div>
                </div>
                <div style="margin-top: 1.5rem; text-align: center;">
                    <button type="button" class="btn btn-success" onclick="saveProjectInfo()" style="font-size: 1rem; padding: 0.75rem 2rem;">
                        ğŸ’¾ í”„ë¡œì íŠ¸ ì •ë³´ ì €ì¥
                    </button>
                </div>
            </form>
        </section>

        <!-- í’ˆì§ˆ ì ê²€ ê°œìš” -->
        <div class="card">
            <div class="card-header">
                <h2 class="card-title">í’ˆì§ˆ ì ê²€ ê°œìš”</h2>
                <p class="card-description">Prefab ë¶€ì¬ì˜ ì „ì²´ í’ˆì§ˆ ìƒíƒœë¥¼ ìš”ì•½í•©ë‹ˆë‹¤</p>
            </div>
            <div class="card-body">
                <div class="stats-grid">
                    <div class="stat-card success">
                        <div class="stat-label">ì„œë¥˜ ê²€ì¦</div>
                        <div class="stat-value" id="docStatus">ëŒ€ê¸°ì¤‘</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-label">ê°€ì†ë„ ê³„ì¸¡</div>
                        <div class="stat-value" id="accelStatus">ëŒ€ê¸°ì¤‘</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-label">ê¸°ìš¸ê¸° ê³„ì¸¡</div>
                        <div class="stat-value" id="tiltStatus">ëŒ€ê¸°ì¤‘</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-label">ë³€í˜•ë¥  ê³„ì¸¡</div>
                        <div class="stat-value" id="strainStatus">ëŒ€ê¸°ì¤‘</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-label">ì œì‘ ì˜¤ì°¨</div>
                        <div class="stat-value" id="errorStatus">ëŒ€ê¸°ì¤‘</div>
                    </div>
                    <div class="stat-card success">
                        <div class="stat-label">ì¢…í•© í‰ê°€</div>
                        <div class="stat-value" id="overallStatus">ì–‘í˜¸</div>
                    </div>
                </div>
            </div>
        </div>

        <!-- ì ê²€ í•­ëª© ì²´í¬ë¦¬ìŠ¤íŠ¸ -->
        <div class="card">
            <div class="card-header">
                <h2 class="card-title">ì ê²€ í•­ëª© ì²´í¬ë¦¬ìŠ¤íŠ¸</h2>
                <p class="card-description">ëª¨ë“  í•­ëª©ì„ í™•ì¸í•˜ì—¬ í’ˆì§ˆê´€ë¦¬ë¥¼ ì™„ë£Œí•˜ì„¸ìš”</p>
            </div>
            <div class="card-body">
                <table>
                    <thead>
                        <tr>
                            <th>ìˆœë²ˆ</th>
                            <th>ì ê²€ í•­ëª©</th>
                            <th>ìƒíƒœ</th>
                            <th>ì´ë™</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>1</td>
                            <td>ìš´ì†¡ê²°ê³¼ ë¦¬í¬íŠ¸ (í’ˆì§ˆê´€ë¦¬ì)</td>
                            <td><span class="badge badge-warning" id="badge1">ë¯¸ì™„ë£Œ</span></td>
                            <td><a href="page2.html" class="btn btn-primary">ì´ë™</a></td>
                        </tr>
                        <tr>
                            <td>2</td>
                            <td>ê°€ì†ë„ ë°ì´í„° ì¸¡ì • ë° ë¶„ì„</td>
                            <td><span class="badge badge-warning" id="badge2">ë¯¸ì™„ë£Œ</span></td>
                            <td><a href="page3.html" class="btn btn-primary">ì´ë™</a></td>
                        </tr>
                        <tr>
                            <td>3</td>
                            <td>ê¸°ìš¸ê¸° ë°ì´í„° ì¸¡ì • ë° ë¶„ì„</td>
                            <td><span class="badge badge-warning" id="badge3">ë¯¸ì™„ë£Œ</span></td>
                            <td><a href="page4.html" class="btn btn-primary">ì´ë™</a></td>
                        </tr>
                        <tr>
                            <td>4</td>
                            <td>ë³€í˜•ë¥  ë°ì´í„° ì¸¡ì • ë° ë¶„ì„</td>
                            <td><span class="badge badge-warning" id="badge4">ë¯¸ì™„ë£Œ</span></td>
                            <td><a href="page5.html" class="btn btn-primary">ì´ë™</a></td>
                        </tr>
                        <tr>
                            <td>5</td>
                            <td>ë¶€ì¬ ì œì‘ ì˜¤ì°¨ ì¸¡ì • ë° ë¹„êµ</td>
                            <td><span class="badge badge-warning" id="badge5">ë¯¸ì™„ë£Œ</span></td>
                            <td><a href="page6.html" class="btn btn-primary">ì´ë™</a></td>
                        </tr>
                        <tr>
                            <td>6</td>
                            <td>ì¢…í•© ëŒ€ì‹œë³´ë“œ í™•ì¸</td>
                            <td><span class="badge badge-info" id="badge6">í™•ì¸ í•„ìš”</span></td>
                            <td><a href="dashboard.html" class="btn btn-success">í™•ì¸</a></td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>

        <!-- ì£¼ìš” ì•ˆë‚´ ì‚¬í•­ -->
        <div class="card">
            <div class="card-header">
                <h2 class="card-title">ì£¼ìš” ì•ˆë‚´ ì‚¬í•­</h2>
            </div>
            <div class="card-body">
                <div class="alert alert-success">
                    <strong>âœ… í’ˆì§ˆ ê¸°ì¤€</strong>
                    <ul style="margin-top: 0.5rem; padding-left: 1.5rem;">
                        <li>ê°€ì†ë„: Â±0.5g ì´ë‚´</li>
                        <li>ê¸°ìš¸ê¸°: Â±2Â° ì´ë‚´</li>
                        <li>ë³€í˜•ë¥ : Â±100Î¼Îµ ì´ë‚´</li>
                        <li>ì œì‘ ì˜¤ì°¨: Â±5mm ì´ë‚´</li>
                    </ul>
                </div>
            </div>
        </div>

        <!-- ë°ì´í„° ê´€ë¦¬ -->
        <div class="card">
            <div class="card-header">
                <h2 class="card-title">ë°ì´í„° ê´€ë¦¬</h2>
                <p class="card-description">ì €ì¥ëœ ë°ì´í„°ë¥¼ ë°±ì—…í•˜ê±°ë‚˜ ë¶ˆëŸ¬ì˜¬ ìˆ˜ ìˆìŠµë‹ˆë‹¤</p>
            </div>
            <div class="card-body">
                <div style="display: flex; gap: 1rem; flex-wrap: wrap;">
                    <button class="btn btn-success" onclick="exportData()">ğŸ“¥ ë°ì´í„° ë‚´ë³´ë‚´ê¸°</button>
                    <label class="btn btn-primary" style="cursor: pointer;">
                        ğŸ“¤ ë°ì´í„° ê°€ì ¸ì˜¤ê¸°
                        <input type="file" accept=".json" onchange="importData(this)" style="display: none;">
                    </label>
                    <button class="btn btn-danger" onclick="clearAllData()">ğŸ—‘ï¸ ëª¨ë“  ë°ì´í„° ì‚­ì œ</button>
                </div>
            </div>
        </div>

        <!-- ì „ì²´ ë³´ê³ ì„œ ì¸ì‡„ -->
        <div class="card">
            <div class="card-header">
                <h2 class="card-title">ì „ì²´ ë³´ê³ ì„œ ì¸ì‡„</h2>
                <p class="card-description">ëª¨ë“  í˜ì´ì§€ì˜ ë°ì´í„°ë¥¼ í†µí•©í•˜ì—¬ ì¸ì‡„í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤</p>
            </div>
            <div class="card-body">
                <a href="print-report.html" class="btn btn-primary" style="font-size: 1.1rem; padding: 1rem 2rem;">
                    ğŸ–¨ï¸ ì „ì²´ ë³´ê³ ì„œ ì¸ì‡„ í˜ì´ì§€ë¡œ ì´ë™
                </a>
                <div class="alert alert-info" style="margin-top: 1rem;">
                    <strong>ğŸ“‹ í¬í•¨ ë‚´ìš©:</strong>
                    <ul style="margin-top: 0.5rem; padding-left: 1.5rem;">
                        <li>1. ì¢…í•© ìš”ì•½</li>
                        <li>2. ìš´ì†¡ê²°ê³¼ ë¦¬í¬íŠ¸ (ì‚¬ì§„ í¬í•¨)</li>
                        <li>3. ê°€ì†ë„ ë°ì´í„° (ê·¸ë˜í”„ í¬í•¨)</li>
                        <li>4. ê¸°ìš¸ê¸° ë°ì´í„° (ê·¸ë˜í”„ í¬í•¨)</li>
                        <li>5. ë³€í˜•ë¥  ë°ì´í„° (ê·¸ë˜í”„ í¬í•¨)</li>
                        <li>6. ë¶€ì¬ ì œì‘ ì˜¤ì°¨ (ì‚¬ì§„, ê·¸ë˜í”„ í¬í•¨)</li>
                        <li>7. ì¢…í•© ëŒ€ì‹œë³´ë“œ (ì¢…í•© í‰ê°€ í¬í•¨)</li>
                    </ul>
                </div>
            </div>
        </div>

        <!-- ë„¤ë¹„ê²Œì´ì…˜ ë²„íŠ¼ -->
        <div class="nav-buttons">
            <div></div>
            <a href="page2.html" class="btn btn-primary">ë‹¤ìŒ: ìš´ì†¡ê²°ê³¼ ë¦¬í¬íŠ¸ â†’</a>
        </div>
    </main>

    <script>
        // Check if active report exists
        function checkActiveReport() {
            const activeReportId = localStorage.getItem('ACTIVE_REPORT_ID');
            if (!activeReportId) {
                alert('í™œì„±í™”ëœ ë³´ê³ ì„œê°€ ì—†ìŠµë‹ˆë‹¤. ë³´ê³ ì„œ ëª©ë¡ì—ì„œ ë³´ê³ ì„œë¥¼ ì„ íƒí•˜ê±°ë‚˜ ìƒˆë¡œ ì‘ì„±í•´ì£¼ì„¸ìš”.');
                window.location.href = 'index.html';
                return false;
            }
            return true;
        }
        
        // í˜ì´ì§€ ë¡œë“œ ì‹œ í”„ë¡œì íŠ¸ ì •ë³´ ìë™ ì €ì¥ ë° ë¡œë“œ
        document.addEventListener('DOMContentLoaded', function() {
            // Check active report
            if (!checkActiveReport()) return;
            
            // í˜„ì¬ ë‚ ì§œ ìë™ ì…ë ¥
            setCurrentDate('inspectionDate');
            
            // í¼ ë°ì´í„° ë¡œë“œ (report ID prefix added in script.js)
            loadFormData('projectInfoForm', STORAGE_KEYS.PROJECT_INFO);
            
            // ìë™ ì €ì¥ ì„¤ì •
            autoSaveForm('projectInfoForm', STORAGE_KEYS.PROJECT_INFO);
            
            // ìƒíƒœ ì—…ë°ì´íŠ¸
            updateStatus();
        });

        // í”„ë¡œì íŠ¸ ì •ë³´ ì €ì¥ í•¨ìˆ˜
        function saveProjectInfo() {
            const form = document.getElementById('projectInfoForm');
            
            // í¼ ìœ íš¨ì„± ê²€ì‚¬
            if (!form.checkValidity()) {
                alert('ëª¨ë“  í•„ìˆ˜ í•­ëª©ì„ ì…ë ¥í•´ì£¼ì„¸ìš”.');
                form.reportValidity();
                return;
            }
            
            // í¼ ë°ì´í„° ìˆ˜ì§‘
            const formData = new FormData(form);
            const data = {};
            for (let [key, value] of formData.entries()) {
                data[key] = value;
            }
            
            // LocalStorageì— ì €ì¥
            saveToStorage(STORAGE_KEYS.PROJECT_INFO, data);
            
            // ì„±ê³µ ë©”ì‹œì§€
            alert('âœ… í”„ë¡œì íŠ¸ ì •ë³´ê°€ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤!');
            
            console.log('í”„ë¡œì íŠ¸ ì •ë³´ ì €ì¥ ì™„ë£Œ:', data);
        }

        // ê° í˜ì´ì§€ì˜ ì™„ë£Œ ìƒíƒœ í™•ì¸ ë° ì—…ë°ì´íŠ¸
        function updateStatus() {
            // í’ˆì§ˆê´€ë¦¬ì ì„¤ë¬¸
            const surveyData = getFromStorage(STORAGE_KEYS.SURVEY_DATA);
            if (surveyData) {
                document.getElementById('badge1').textContent = 'ì™„ë£Œ';
                document.getElementById('badge1').className = 'badge badge-success';
                document.getElementById('docStatus').textContent = 'ì™„ë£Œ';
            }

            // ê°€ì†ë„ ë°ì´í„°
            const accelData = getFromStorage(STORAGE_KEYS.ACCELERATION_DATA);
            if (accelData) {
                document.getElementById('badge2').textContent = 'ì™„ë£Œ';
                document.getElementById('badge2').className = 'badge badge-success';
                document.getElementById('accelStatus').textContent = 'ì •ìƒ';
            }

            // ê¸°ìš¸ê¸° ë°ì´í„°
            const tiltData = getFromStorage(STORAGE_KEYS.TILT_DATA);
            if (tiltData) {
                document.getElementById('badge3').textContent = 'ì™„ë£Œ';
                document.getElementById('badge3').className = 'badge badge-success';
                document.getElementById('tiltStatus').textContent = 'ì •ìƒ';
            }

            // ë³€í˜•ë¥  ë°ì´í„°
            const strainData = getFromStorage(STORAGE_KEYS.STRAIN_DATA);
            if (strainData) {
                document.getElementById('badge4').textContent = 'ì™„ë£Œ';
                document.getElementById('badge4').className = 'badge badge-success';
                document.getElementById('strainStatus').textContent = 'ì •ìƒ';
            }

            // ì œì‘ ì˜¤ì°¨
            const errorData = getFromStorage(STORAGE_KEYS.FABRICATION_ERROR);
            if (errorData) {
                document.getElementById('badge5').textContent = 'ì™„ë£Œ';
                document.getElementById('badge5').className = 'badge badge-success';
                document.getElementById('errorStatus').textContent = 'ì–‘í˜¸';
            }

            // ì¢…í•© í‰ê°€
            const allComplete = surveyData && accelData && tiltData && strainData && errorData;
            if (allComplete) {
                document.getElementById('overallStatus').textContent = 'ì í•©';
                document.getElementById('badge6').textContent = 'ì™„ë£Œ';
                document.getElementById('badge6').className = 'badge badge-success';
            }
        }
    </script>
</body>
</html>
